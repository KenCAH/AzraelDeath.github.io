<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>NIRVANA</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Blog of a Chinese OIer">
<meta property="og:type" content="website">
<meta property="og:title" content="NIRVANA">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="NIRVANA">
<meta property="og:description" content="Blog of a Chinese OIer">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NIRVANA">
<meta name="twitter:description" content="Blog of a Chinese OIer">
  
    <link rel="alternative" href="/atom.xml" title="NIRVANA" type="application/atom+xml">
  
  
    <link rel="icon" href="http://chuantu.biz/t6/89/1507626502x2728279003.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://chuantu.biz/t6/89/1507626502x2728279003.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Azrael_Death</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Veni Vidi Vici</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/AzraelDeath" title="github">github</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/azraeldeath" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/2-SAT/" style="font-size: 11.25px;">2-SAT</a> <a href="/tags/AC自动机/" style="font-size: 11.25px;">AC自动机</a> <a href="/tags/APIO/" style="font-size: 10px;">APIO</a> <a href="/tags/BZOJ/" style="font-size: 20px;">BZOJ</a> <a href="/tags/DFS序/" style="font-size: 10px;">DFS序</a> <a href="/tags/DP/" style="font-size: 11.25px;">DP</a> <a href="/tags/HDU/" style="font-size: 13.75px;">HDU</a> <a href="/tags/LCA/" style="font-size: 12.5px;">LCA</a> <a href="/tags/LG/" style="font-size: 11.25px;">LG</a> <a href="/tags/MST/" style="font-size: 12.5px;">MST</a> <a href="/tags/Manacher/" style="font-size: 11.25px;">Manacher</a> <a href="/tags/NOI/" style="font-size: 11.25px;">NOI</a> <a href="/tags/NOIp/" style="font-size: 11.25px;">NOIp</a> <a href="/tags/POI/" style="font-size: 10px;">POI</a> <a href="/tags/POJ/" style="font-size: 16.25px;">POJ</a> <a href="/tags/Tarjan/" style="font-size: 11.25px;">Tarjan</a> <a href="/tags/Trie/" style="font-size: 10px;">Trie</a> <a href="/tags/UVa/" style="font-size: 10px;">UVa</a> <a href="/tags/主席树/" style="font-size: 13.75px;">主席树</a> <a href="/tags/二分答案/" style="font-size: 11.25px;">二分答案</a> <a href="/tags/分块/" style="font-size: 10px;">分块</a> <a href="/tags/差分/" style="font-size: 10px;">差分</a> <a href="/tags/差分约束系统/" style="font-size: 10px;">差分约束系统</a> <a href="/tags/并查集/" style="font-size: 11.25px;">并查集</a> <a href="/tags/总结/" style="font-size: 18.75px;">总结</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/树套树/" style="font-size: 11.25px;">树套树</a> <a href="/tags/树状数组/" style="font-size: 12.5px;">树状数组</a> <a href="/tags/模拟/" style="font-size: 11.25px;">模拟</a> <a href="/tags/省选/" style="font-size: 17.5px;">省选</a> <a href="/tags/线段树/" style="font-size: 12.5px;">线段树</a> <a href="/tags/组合数学/" style="font-size: 10px;">组合数学</a> <a href="/tags/网络流/" style="font-size: 15px;">网络流</a> <a href="/tags/莫队/" style="font-size: 11.25px;">莫队</a> <a href="/tags/补集转换/" style="font-size: 10px;">补集转换</a> <a href="/tags/贪心/" style="font-size: 10px;">贪心</a> <a href="/tags/费用流/" style="font-size: 10px;">费用流</a> <a href="/tags/高斯消元/" style="font-size: 10px;">高斯消元</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.csdn.net/OwenOwl">OwenOwl</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.csdn.net/Joker_69">Joker</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://dangxingyu.com">DXY</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://309459245.lofter.com">YJQ</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/candy99">Candy</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/zig-zag">ZigZag</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://cxjyxx.me">cxjyxx_me</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.shuizilong.com">ShuiZiLong</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/kuangbin">KuangBin</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Azrael_Death</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://chuantu.biz/t6/89/1507626502x2728279003.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Azrael_Death</h1>
			</hgroup>
			
			<p class="header-subtitle">Veni Vidi Vici</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/AzraelDeath" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/azraeldeath" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-BZOJ1033【ZJOI2007】杀蚂蚁 模拟" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/BZOJ1033【ZJOI2007】杀蚂蚁 模拟/" class="article-date">
  	<time datetime="2017-10-26T16:00:00.000Z" itemprop="datePublished">2017-10-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/BZOJ1033【ZJOI2007】杀蚂蚁 模拟/">
        BZOJ1033【ZJOI2007】杀蚂蚁 &lt;模拟&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>【ZJOI2008】杀蚂蚁</p>
<p>Description<br>最近，佳佳迷上了一款好玩的小游戏： antbuster。<br>游戏规则非常简单：在一张地图上，左上角是蚂蚁窝，右下角是蛋糕，蚂蚁会源源不断地从窝里爬出来，试图把蛋糕搬回蚂蚁窝。而你的任务，就是用原始资金以及杀蚂蚁获得的奖金造防御塔，杀掉这些试图跟你抢蛋糕的蚂蚁~<br>下附一张游戏截图：<br>为了拿到尽可能高的分数，佳佳设计了很多种造塔的方案，但在尝试了其中的一小部分后，佳佳发现，这个游戏实在是太费时间了。为了节省时间，佳佳决定写个程序，对于每一种方案，模拟游戏进程，根据效果来判断方案的优劣。<br>根据自己在游戏中积累的一些经验，以及上网搜到的一些参数，佳佳猜了蚂蚁爬行的算法，并且假设游戏中的蚂蚁也是按这个规则选择路线：</p>
<ol>
<li>每一秒钟开始的时候，蚂蚁都在平面中的某个整点上。如果蚂蚁没有扛着蛋糕，它会在该点留下2 单位的信息素，否则它会留下 5 单位的信息素。然后蚂蚁会在正北、正南、正东、正西四个方向中选择一个爬过去。</li>
<li>选择方向的规则是：首先，爬完一个单位长度后到达的那个点上，不能有其他蚂蚁或是防御塔，并且那个点不能是蚂蚁上一秒所在的点（除非上一个时刻蚂蚁就被卡住，且这个时刻它仍无法动），当然，蚂蚁也不会爬出地图的边界（我们定义这些点为不可达点）。如果此时有多个选<br>择，蚂蚁会选择信息素最多的那个点爬过去。</li>
<li>如果此时仍有多种选择，蚂蚁先面向正东，如果正东不是可选择的某个方向，它会顺时针转90°，再次判断，如果还不是，再转 90°…直到找到可以去的方向。</li>
<li>如果将每只蚂蚁在洞口出现的时间作为它的活动时间的第 1 秒，那么每当这只蚂蚁的活动时间秒数为 5 的倍数的时候，它先按规则 1~3 确定一个方向，面对该方向后逆时针转 90°，若它沿当前方向会走到一个不可达点，它会不停地每次逆时针转 90°，直到它面对着一个可达的点，这样<br>定下的方向才是蚂蚁最终要爬去的方向。</li>
<li>如果蚂蚁的四周都是不可达点，那么蚂蚁在这一秒内会选择停留在当前点。下一秒判断移动方向时，它上一秒所在点为其当前停留的点。</li>
<li>你可以认为蚂蚁在选定方向后，瞬间移动到它的目标点，这一秒钟剩下的时间里，它就停留在目标点。</li>
<li>蚂蚁按出生的顺序移动，出生得比较早的蚂蚁先移动。<br>然后，是一些有关地图的信息：</li>
<li>每一秒，地图所有点上的信息素会损失 1 单位，如果那个点上有信息素的话。</li>
<li>地图上某些地方是炮台。炮台的坐标在输入中给出。</li>
<li>地图的长、宽在输入中给出，对于n ? m的地图，它的左上角坐标为(0,0)，右下角坐标为(n,m)。蚂蚁洞的位置为(0,0)，蛋糕的位置为(n,m)。</li>
<li>你可以把蚂蚁看做一个直径为 1 单位的圆，圆心位于蚂蚁所在的整点。</li>
<li>游戏开始时，地图上没有蚂蚁，每个点上的信息素含量均为 0。<br>一些有关炮塔的信息：</li>
<li>炮塔被放置在地图上的整点处。</li>
<li>为了简单一些，我们认为这些炮塔都是激光塔。激光塔的射速是 1 秒/次，它的攻击伤害为 d/次，攻击范围为 r。你可以认为每秒蚂蚁移动完毕后，塔才开始攻击。并且，只有当代表蚂蚁的圆的圆心与塔的直线距离不超过 r 时，塔才算打得到那只蚂蚁。</li>
<li>如果一只蚂蚁扛着蛋糕，那么它会成为 target，也就是说，任何打得到它的塔的炮口都会对准它。如果蛋糕好好地呆在原位，那么每个塔都会挑离它最近的蚂蚁进行攻击，如果有多只蚂蚁，它会选出生较早的一只。</li>
<li>激光塔有个比较奇怪的特性：它在选定了打击目标后，只要目标在其射程内，塔到目标蚂蚁圆心的连线上的所有蚂蚁（这里“被打到”的判定变成了表示激光的线段与表示蚂蚁的圆有公共点）都会被打到并损 d 格血，但激光不会穿透它的打击目标打到后面的蚂蚁。</li>
<li>尽管在真实游戏中，塔是可以升级的，但在这里我们认为塔的布局和等级就此定了下来，不再变动。<br>再介绍一下蚂蚁窝：</li>
<li>如果地图上的蚂蚁不足 6 只，并且洞口没有蚂蚁，那么窝中每秒会爬出一只蚂蚁，直到地图上的蚂蚁数为 6 只。</li>
<li>刚出生的蚂蚁站在洞口。3. 每只蚂蚁有一个级别，级别决定了蚂蚁的血量，级别为 k 的蚂蚁的血量为[4*1.1^k]。每被塔打<br>一次，蚂蚁的血减少 d。注意，血量为 0 的蚂蚁仍能精力充沛地四处乱爬，只有一只蚂蚁的血被打成负数时，它才算挂了。</li>
<li>蚂蚁的级别是这样算的：前 6 只出生的蚂蚁是 1 级，第 7~12 只是 2 级，依此类推。<br>最后给出关于蛋糕的介绍：</li>
<li>简单起见，你可以认为此时只剩最后一块蛋糕了。如果有蚂蚁走到蛋糕的位置，并且此时蛋糕没有被扛走，那么这只蚂蚁就扛上了蛋糕。蚂蚁被打死后蛋糕归位。</li>
<li>如果一只扛着蛋糕的蚂蚁走到蚂蚁窝的位置，我们就认为蚂蚁成功抢到了蛋糕，游戏结束。</li>
<li>蚂蚁扛上蛋糕时，血量会增加[该蚂蚁出生时血量/2]，但不会超过上限。<br>整理一下 1 秒钟内发生的事件：<br>1 秒的最初，如果地图上蚂蚁数不足 6，一只蚂蚁就会在洞口出生。<br>接着，蚂蚁们在自己所在点留下一些信息素后，考虑移动。先出生的蚂蚁先移动。<br>移动完毕后，如果有蚂蚁在蛋糕的位置上并且蛋糕没被拿走，它把蛋糕扛上，血量增加，并在这时被所有塔设成 target。<br>然后所有塔同时开始攻击。如果攻击结束后那只扛着蛋糕的蚂蚁挂了，蛋糕瞬间归位。<br>攻击结束后，如果发现扛蛋糕的蚂蚁没死并在窝的位置，就认为蚂蚁抢到了蛋糕。游戏也在此时结束。<br>最后，地图上所有点的信息素损失 1 单位。所有蚂蚁的年龄加 1。<br>漫长的 1 秒到此结束。</li>
</ol>
<p>Input<br>输入的第一行是 2 个用空格隔开的整数， n、 m，分别表示了地图的长和宽。<br>第二行是 3 个用空格隔开的整数， s、 d、 r，依次表示炮塔的个数、单次攻击伤害以及攻击范围。接下来 s 行，每行是 2 个用空格隔开的整数 x、 y，描述了一个炮塔的位置。当然，蚂蚁窝的洞口以及蛋糕所在的位置上一定没有炮塔。<br>最后一行是一个正整数 t，表示我们模拟游戏的前 t 秒钟。<br>Output<br>如果在第 t 秒或之前蚂蚁抢到了蛋糕，输出一行“Game over after x seconds”，其中x为游戏结束的时间，否则输出“The game is going on”。<br>如果游戏在 t 秒或之前结束，输出游戏结束时所有蚂蚁的信息，否则输出 t 秒后所有蚂蚁的信息。<br>格式如下：第一行是 1 个整数 s，表示此时活着的蚂蚁的总数。接下来 s 行，每行 5 个整数，依次表示一只蚂蚁的年龄（单位为秒）、等级、当前血量，以及在地图上的位置（a， b）。输出按蚂蚁的年龄递减排序。</p>
<p>Sample Input<br>3 5<br>1 1 2<br>2 2<br>5<br>Sample Output<br>The game is going on<br>5<br>5 1 3 1 4<br>4 1 3 0 4<br>3 1 3 0 3<br>2 1 3 0 2<br>1 1 4 0 1</p>
<p>Hint<br>样例说明：<br>3*5的地图，有1个单次伤害为1、攻击范围为2的激光炮塔，它的位置为（2，2），模拟游戏的前5秒。5秒内有<br>5只蚂蚁出生，都是向东爬行，其中第1~4只在路过（0，2）点时被激光塔伤了1格血。在第5秒的时候，最早出生的<br>蚂蚁按移动规则1~3本来该向东移动，但由于规则4的作用，它在发现向北和向西移动都会到达不可达点后，最终选<br>择了向南移动。<br>数据说明：<br>100%的数据满足1 ≤ n,m ≤ 8，s ≤ 20，t ≤ 200,000</p>
</blockquote>
<p>如果觉得此题面不好看，请戳这里：<a href="https://www.zybuluo.com/Jerusalem/note/221811" target="_blank" rel="external">https://www.zybuluo.com/Jerusalem/note/221811</a></p>
<p>标签：大模拟</p>
<p>这是那种“做一做，一个下午就没了”的恶心题。<br>我从上午十一点开做，足足做到晚上七点半才做完。<br>恶心~</p>
<p>大模拟，题面已经比较清楚了。<br>坑点如下：</p>
<ol>
<li>蚂蚁既是一个点，也是一个直接为1的圆（注意，是直径！）<br>即在判断一个炮台和一只蚂蚁的距离时，应取圆心与炮台距离，但在判断一只蚂蚁是否会被炮台顺带打到，即在打目标蚂蚁的路径上时，应判断激光直线是否与圆有交点。</li>
<li>新出生的蚂蚁刚从蚁巢里出来时，要标记(0,0)为有物体，否则回来的蚂蚁会和它重在一起。</li>
<li>若当前蚂蚁出生的时间为t，则其年龄为t-1。</li>
<li>寻找移动方向时，应先按规则1~3选择下一个位置。如果出生时间为5的倍数，则应该逆时针（注意，是逆时针）旋转，并且找到一个可行方向就走过去，不考虑信息素多少。</li>
<li>所有炮台是一起开炮，所以应该先把所有炮台的目标确定后，再统一扣蚂蚁的生命值。这样会出现蚂蚁生命在同一秒内被扣成负数还要继续扣的情况，这样就是正确的。</li>
</ol>
<p>奉献几组数据，可自测：</p>
<h3 id="Sample-1"><a href="#Sample-1" class="headerlink" title="Sample #1"></a>Sample #1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Input #1</div><div class="line">4 4</div><div class="line">4 10 5</div><div class="line">1 1</div><div class="line">2 2</div><div class="line">1 2</div><div class="line">2 1</div><div class="line">1000</div><div class="line"></div><div class="line">Output #1</div><div class="line">Game over after 831 seconds</div><div class="line">6</div><div class="line">110 49 86 2 3</div><div class="line">88 49 26 0 1</div><div class="line">77 49 286 3 1</div><div class="line">58 50 29 0 0</div><div class="line">22 50 419 4 3</div><div class="line">10 50 469 3 2</div></pre></td></tr></table></figure>
<h3 id="Sample-2"><a href="#Sample-2" class="headerlink" title="Sample #2"></a>Sample #2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Input #2</div><div class="line">6 4</div><div class="line">1 10000 10</div><div class="line">2 2</div><div class="line">256</div><div class="line"></div><div class="line">Output #2</div><div class="line">The game is going on</div><div class="line">0</div></pre></td></tr></table></figure>
<h3 id="Sample-3"><a href="#Sample-3" class="headerlink" title="Sample #3"></a>Sample #3</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Input #3</div><div class="line">4 7</div><div class="line">0 0 0</div><div class="line">60200</div><div class="line"></div><div class="line">Output #3</div><div class="line">Game over after 60200 seconds</div><div class="line">6</div><div class="line">60199 1 4 0 0</div><div class="line">60198 1 4 2 6</div><div class="line">60197 1 4 4 7</div><div class="line">60196 1 4 2 1</div><div class="line">60195 1 4 3 5</div><div class="line">60194 1 4 4 5</div></pre></td></tr></table></figure>
<h3 id="Sample-4"><a href="#Sample-4" class="headerlink" title="Sample #4"></a>Sample #4</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">Input #4</div><div class="line">2 5</div><div class="line">6 1 3</div><div class="line">0 1</div><div class="line">1 1</div><div class="line">1 3</div><div class="line">1 4</div><div class="line">2 3</div><div class="line">2 4</div><div class="line">200000</div><div class="line"></div><div class="line">Output #4</div><div class="line">The game is going on</div><div class="line">6</div><div class="line">15311 86 13525 1 5</div><div class="line">12518 86 10203 0 5</div><div class="line">9447 87 12495 0 4</div><div class="line">6371 87 13461 0 3</div><div class="line">3295 87 14586 0 2</div><div class="line">219 87 15873 1 2</div></pre></td></tr></table></figure>
<p>附上AC代码：<br>（BZOJ上A了，洛谷上死活WA一个点，不知道为什么）<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> EPS 1e-5</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> dnt;</div><div class="line"><span class="keyword">int</span> n, m, s, d, r, cnt, num, tar = <span class="number">-1</span>;</div><div class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; living;	<span class="keyword">int</span> information[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line"><span class="keyword">bool</span> lose = <span class="literal">false</span>, cake = <span class="literal">true</span>, is_taken[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> nxt[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc_lim_blood</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;dnt ret = <span class="number">4</span>;	<span class="keyword">while</span> (k--)	ret *= <span class="number">1.1</span>;	<span class="keyword">return</span> (<span class="keyword">int</span>)<span class="built_in">floor</span>(ret);&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Ant</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> x, y, id, px, py;	<span class="keyword">bool</span> has_cake;</div><div class="line">	<span class="keyword">int</span> cur_blood, lim_blood, level, age;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">birth</span><span class="params">(<span class="keyword">int</span> _id)</span> </span>&#123;</div><div class="line">		living.push_back(id = _id), num++, has_cake = <span class="literal">false</span>;</div><div class="line">		x = y = age = <span class="number">0</span>, px = py = <span class="number">-1</span>, level = id/<span class="number">6</span>+<span class="number">1</span>;</div><div class="line">		cur_blood = lim_blood = calc_lim_blood(level), is_taken[x][y] = <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">dead</span><span class="params">()</span> </span>&#123;</div><div class="line">		num--;	<span class="keyword">int</span> pos;</div><div class="line">		<span class="keyword">for</span> (pos = <span class="number">0</span>; pos &lt; (<span class="keyword">int</span>)living.size(); pos++)	<span class="keyword">if</span> (living[pos] == id)	<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">for</span> (; pos &lt; (<span class="keyword">int</span>)living.size()<span class="number">-1</span>; pos++)	living[pos] = living[pos+<span class="number">1</span>];</div><div class="line">		living.erase(living.end()<span class="number">-1</span>);</div><div class="line">		<span class="keyword">if</span> (has_cake)	cake = <span class="literal">true</span>, tar = <span class="number">-1</span>;	is_taken[x][y] = <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">recover</span><span class="params">()</span> </span>&#123;cur_blood = min(cur_blood+(<span class="keyword">int</span>)<span class="built_in">floor</span>(lim_blood/<span class="number">2</span>), lim_blood);&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">hurt</span><span class="params">()</span> </span>&#123;cur_blood -= d;&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">left_information</span><span class="params">()</span> </span>&#123;information[x][y] += has_cake ? <span class="number">5</span> : <span class="number">2</span>;&#125;</div><div class="line">	pair &lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; choose_direction() &#123;</div><div class="line">		<span class="keyword">int</span> nx = <span class="number">-1</span>, ny = <span class="number">-1</span>, cur;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">			<span class="keyword">int</span> tx = x+nxt[i][<span class="number">0</span>], ty = y+nxt[i][<span class="number">1</span>];</div><div class="line">			<span class="keyword">if</span> (tx &lt; <span class="number">0</span> || tx &gt; n || ty &lt; <span class="number">0</span> || ty &gt; m)	<span class="keyword">continue</span>;</div><div class="line">			<span class="keyword">if</span> (is_taken[tx][ty] || (tx == px &amp;&amp; ty == py))	<span class="keyword">continue</span>;</div><div class="line">			<span class="keyword">if</span> (nx == <span class="number">-1</span> &amp;&amp; ny == <span class="number">-1</span>)	nx = tx, ny = ty;</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (information[tx][ty] &gt; information[nx][ny])	nx = tx, ny = ty;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> ((age+<span class="number">1</span>)%<span class="number">5</span> == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (nx == x &amp;&amp; ny == y+<span class="number">1</span>)	nx = ny = <span class="number">-1</span>, cur = <span class="number">0</span>;	<span class="keyword">if</span> (nx == x+<span class="number">1</span> &amp;&amp; ny == y)	nx = ny = <span class="number">-1</span>, cur = <span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span> (nx == x &amp;&amp; ny == y<span class="number">-1</span>)	nx = ny = <span class="number">-1</span>, cur = <span class="number">2</span>;	<span class="keyword">if</span> (nx == x<span class="number">-1</span> &amp;&amp; ny == y)	nx = ny = <span class="number">-1</span>, cur = <span class="number">3</span>;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = cur<span class="number">-1</span>; ~i; i--) &#123;</div><div class="line">				<span class="keyword">int</span> tx = x+nxt[i][<span class="number">0</span>], ty = y+nxt[i][<span class="number">1</span>];</div><div class="line">				<span class="keyword">if</span> (tx &lt; <span class="number">0</span> || tx &gt; n || ty &lt; <span class="number">0</span> || ty &gt; m)	<span class="keyword">continue</span>;</div><div class="line">				<span class="keyword">if</span> (is_taken[tx][ty] || (tx == px &amp;&amp; ty == py))	<span class="keyword">continue</span>;</div><div class="line">				<span class="keyword">if</span> (nx == <span class="number">-1</span> &amp;&amp; ny == <span class="number">-1</span>)	nx = tx, ny = ty;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &gt;= cur; i--) &#123;</div><div class="line">				<span class="keyword">int</span> tx = x+nxt[i][<span class="number">0</span>], ty = y+nxt[i][<span class="number">1</span>];</div><div class="line">				<span class="keyword">if</span> (tx &lt; <span class="number">0</span> || tx &gt; n || ty &lt; <span class="number">0</span> || ty &gt; m)	<span class="keyword">continue</span>;</div><div class="line">				<span class="keyword">if</span> (is_taken[tx][ty] || (tx == px &amp;&amp; ty == py))	<span class="keyword">continue</span>;</div><div class="line">				<span class="keyword">if</span> (nx == <span class="number">-1</span> &amp;&amp; ny == <span class="number">-1</span>)	nx = tx, ny = ty;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> make_pair(nx, ny);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</div><div class="line">		pair &lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; np = choose_direction();</div><div class="line">		<span class="keyword">if</span> (np.first == <span class="number">-1</span> &amp;&amp; np.second == <span class="number">-1</span>)	np.first = x, np.second = y;</div><div class="line">		is_taken[x][y] = <span class="literal">false</span>, is_taken[np.first][np.second] = <span class="literal">true</span>;</div><div class="line">		px = x, py = y, x = np.first, y = np.second;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">can_take_cake</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> x == n &amp;&amp; y == m &amp;&amp; cake;&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">take_cake</span><span class="params">()</span> </span>&#123;<span class="keyword">if</span> (can_take_cake())	recover(), cake = <span class="literal">false</span>, has_cake = <span class="literal">true</span>, tar = id;&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">steal_cake</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> x == <span class="number">0</span> &amp;&amp; y == <span class="number">0</span> &amp;&amp; has_cake;&#125;</div><div class="line">&#125; ant[<span class="number">2000000</span>];</div><div class="line">	<span class="function">dnt <span class="title">dis</span><span class="params">(<span class="keyword">int</span> x1, <span class="keyword">int</span> y1, <span class="keyword">int</span> x2, <span class="keyword">int</span> y2)</span> </span>&#123;<span class="keyword">return</span> (x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);&#125;</div><div class="line">	<span class="function">dnt <span class="title">getcos</span><span class="params">(<span class="keyword">int</span> x1, <span class="keyword">int</span> y1, <span class="keyword">int</span> x2, <span class="keyword">int</span> y2, <span class="keyword">int</span> x3, <span class="keyword">int</span> y3)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> a1 = x1-x2, b1 = y1-y2, a2 = x3-x2, b2 = y3-y2;</div><div class="line">		<span class="keyword">return</span> (a1*a2+b1*b2)/(dnt)(<span class="built_in">sqrt</span>(dis(x1, y1, x2, y2))*<span class="built_in">sqrt</span>(dis(x3, y3, x2, y2)));</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">reach</span><span class="params">(<span class="keyword">int</span> tarid, <span class="keyword">int</span> inid, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">		dnt cos1 = getcos(ant[inid].x, ant[inid].y, x, y, ant[tarid].x, ant[tarid].y);</div><div class="line">		dnt cos2 = getcos(ant[inid].x, ant[inid].y, ant[tarid].x, ant[tarid].y, x, y);</div><div class="line">		<span class="keyword">if</span> (cos1 &lt; EPS || cos2 &lt; EPS)	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		dnt t = <span class="built_in">sqrt</span>(dis(ant[inid].x, ant[inid].y, x, y))*<span class="built_in">sqrt</span>(<span class="number">1.0</span>-cos1*cos1);	<span class="keyword">return</span> t<span class="number">-0.5</span> &lt; EPS;</div><div class="line">	&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Laser</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> x, y;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;<span class="keyword">return</span> (x-ant[id].x)*(x-ant[id].x)+(y-ant[id].y)*(y-ant[id].y);&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> _x, <span class="keyword">int</span> _y)</span> </span>&#123;x = _x, y = _y, is_taken[x][y] = <span class="literal">true</span>;&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">can_hit</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;<span class="keyword">return</span> (x-ant[id].x)*(x-ant[id].x)+(dnt)(y-ant[id].y)*(y-ant[id].y) &lt;= r*r;&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">choose_target</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (~tar &amp;&amp; can_hit(tar))	<span class="keyword">return</span> tar;</div><div class="line">		<span class="keyword">int</span> ret = <span class="number">-1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, cur = living[i]; i &lt; (<span class="keyword">int</span>)living.size(); cur = living[++i])</div><div class="line">			<span class="keyword">if</span> (can_hit(cur))	<span class="keyword">if</span> (ret == <span class="number">-1</span> || dist(ret) &gt; dist(cur))	ret = cur;</div><div class="line">		<span class="keyword">return</span> ret;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> id = choose_target();	<span class="keyword">if</span> (id == <span class="number">-1</span>)	<span class="keyword">return</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)living.size(); i++)</div><div class="line">			<span class="keyword">if</span> (reach(id, living[i], x, y))	ant[living[i]].hurt();</div><div class="line">	&#125;</div><div class="line">&#125; laser[<span class="number">10</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_age</span><span class="params">()</span> </span>&#123;<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)living.size(); i++)	ant[living[i]].age++;&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">lose_information</span><span class="params">()</span> </span>&#123;<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= m; j++) information[i][j] -= (information[i][j] &gt; <span class="number">0</span>);&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">game_over</span><span class="params">()</span> </span>&#123;<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)living.size(); i++)	<span class="keyword">if</span> (ant[living[i]].steal_cake())	<span class="keyword">return</span> <span class="literal">true</span>;	<span class="keyword">return</span> <span class="literal">false</span>;&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">per_second</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (num &lt; <span class="number">6</span> &amp;&amp; !is_taken[<span class="number">0</span>][<span class="number">0</span>])	ant[cnt].birth(cnt), cnt++;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)living.size(); i++)	ant[living[i]].left_information();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)living.size(); i++)	ant[living[i]].move();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)living.size(); i++)	ant[living[i]].take_cake();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s; i++)	laser[i].attack();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, cur; i &lt; (<span class="keyword">int</span>)living.size(); i++) &#123;cur = living[i];	<span class="keyword">if</span> (ant[cur].cur_blood &lt; <span class="number">0</span>)	ant[cur].dead(), i--;&#125;</div><div class="line">	<span class="keyword">if</span> (game_over()) &#123;<span class="built_in">printf</span>(<span class="string">"Game over after %d seconds\n"</span>, t), lose = <span class="literal">true</span>;	<span class="keyword">return</span> <span class="literal">false</span>;&#125;</div><div class="line">	add_age(), lose_information();	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, num);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, cur = living[i]; i &lt; (<span class="keyword">int</span>)living.size(); cur = living[++i])</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d %d %d %d %d\n"</span>, ant[cur].age, ant[cur].level, ant[cur].cur_blood, ant[cur].x, ant[cur].y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d%d"</span>, &amp;n, &amp;m, &amp;s, &amp;d, &amp;r);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, x, y; i &lt; s; i++)	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y), laser[i].build(x, y);</div><div class="line">	<span class="keyword">int</span> t;	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)	<span class="keyword">if</span> (!per_second(i))	<span class="keyword">break</span>;</div><div class="line">	<span class="keyword">if</span> (!lose)	<span class="built_in">printf</span>(<span class="string">"The game is going on\n"</span>);	output();	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BZOJ/">BZOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/模拟/">模拟</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-BZOJ4325【NOIp2015】斗地主 搜索+贪心" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/BZOJ4325【NOIp2015】斗地主 搜索+贪心/" class="article-date">
  	<time datetime="2017-10-24T16:00:00.000Z" itemprop="datePublished">2017-10-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/BZOJ4325【NOIp2015】斗地主 搜索+贪心/">
        BZOJ4325【NOIp2015】斗地主 &lt;搜索+贪心&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>斗地主<br>Time Limit: 30 Sec  Memory Limit: 1024 MB</p>
<p>Description<br>牛牛最近迷上了一种叫斗地主的扑克游戏。斗地主是一种使用黑桃、红心、梅花、方片的A到K加上大小王的共54张牌来进行的扑克牌游戏。在斗地主中，牌的大小关系根据牌的数码表示如下：3&lt;4&lt;5&lt;6&lt;7&lt;8&lt;9&lt;10&lt;J&lt;Q&lt;K&lt;A&lt;2&lt;小王&lt;大王，而花色并不对牌的大小产生影响。每一局游戏中，一副手牌由n张牌组成。游戏者每次可以根据规定的牌型进行出牌，首先打光自己的手牌一方取得游戏的胜利。现在，牛牛只想知道，对于自己的若干组手牌，分别最少需要多少次出牌可以将它们打光。请你帮他解决这个问题。需要注意的是，本题中游戏者每次可以出手的牌型与一般的斗地主相似而略有不同。具体规则如下：<br>火箭    即双王<br>炸弹    四张同点牌<br>单张牌    单张牌<br>对子牌    两张码数相同的牌<br>三张牌    三张码数相同的牌<br>三带一    三张码数相同的牌+一张单牌<br>三带二    三张码数相同的牌+一对牌<br>单顺子    五张或更多码数连续的单牌（不包括2和双王）<br>双顺子    三对或更多码数连续的对牌（不包括2和双王）<br>三顺子    二个或更多码数连续的三张牌（不包括2和双王）<br>四带二    四张码数相同的牌+任意两张牌（或任意两对牌）</p>
<p>Input<br>第一行包含用空格隔开的2个正整数T,N，表示手牌的组数以及每组手牌的张数。<br>接下来T组数据，每组数据N行，每行一个非负整数对Ai,Bi，表示一张牌，其中Ai表示牌的数码,Bi表示牌的花色，中间用空格隔开。特别的，我们用1来表示数码A，11表示数码J，12表示数码Q，13表示数码K；黑桃、红心、梅花、方片分别用1-4来表示；小王的表示方法为01，大王的表示方法为02。<br>Output<br>共T行，每行一个整数，表示打光第T组手牌的最少次数。</p>
<p>Sample Input<br>1 8<br>7 4<br>8 4<br>9 1<br>10 4<br>11 1<br>5 1<br>1 4<br>1 1<br>Sample Output<br>3</p>
<p>HINT<br>共有1组手牌，包含8张牌：方片7，方片8，黑桃9，方片10，黑桃J，黑桃5，方片A以及黑桃A。可以通过打单顺子（方片7，方片8，黑桃9，方片10，黑桃J），单张牌（黑桃5）以及对子牌（黑桃A以及方片A）在3次内打光。<br>T&lt;=10    N&lt;=23</p>
</blockquote>
<p>UOJ传送门：<a href="http://uoj.ac/problem/147" target="_blank" rel="external">http://uoj.ac/problem/147</a></p>
<p>标签:爆搜+贪心</p>
<p>题面看起来挺吓人，做起来却比较容易，特别是代码复杂度不高（毕竟做了恶心的猪国杀作铺垫）。<br>发现确定顺子之后，其他所有牌都可以贪心取，从耗费牌数多的往牌数少的取。<br>用一个DFS作大框架，在DFS到每一层（即每次取一组顺子）的前后用贪心算出当前不再取顺子而直接贪心取的总次数，打擂即可。</p>
<p>附上代码：<br>（貌似这个代码只能过原数据，加强版因为“有几个相同的王不能组成对子”这一bug，我的代码过不了，要加特判）<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SIZE 14</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 2147483647</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, ans, c[SIZE];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;ans = INF;	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SIZE; i++)	c[i] = <span class="number">0</span>;&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++)	c[i] += x;&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> c1, c2, c3, c4, ret;	c1 = c2 = c3 = c4 = ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SIZE; i++)	c1 += (c[i] == <span class="number">1</span>), c2 += (c[i] == <span class="number">2</span>), c3 += (c[i] == <span class="number">3</span>), c4 += (c[i] == <span class="number">4</span>);</div><div class="line">	<span class="keyword">while</span> (c2 &gt;= <span class="number">2</span> &amp;&amp; c4 &gt;= <span class="number">1</span>)	c2 -= <span class="number">2</span>, c4 -= <span class="number">1</span>, ret++;	<span class="keyword">while</span> (c2 &gt;= <span class="number">1</span> &amp;&amp; c3 &gt;= <span class="number">1</span>)	c2 -= <span class="number">1</span>, c3 -= <span class="number">1</span>, ret++;</div><div class="line">	<span class="keyword">while</span> (c1 &gt;= <span class="number">2</span> &amp;&amp; c4 &gt;= <span class="number">1</span>)	c1 -= <span class="number">2</span>, c4 -= <span class="number">1</span>, ret++;	<span class="keyword">while</span> (c2 &gt;= <span class="number">1</span> &amp;&amp; c4 &gt;= <span class="number">1</span>)	c2 -= <span class="number">1</span>, c4 -= <span class="number">1</span>, ret++;</div><div class="line">	<span class="keyword">while</span> (c1 &gt;= <span class="number">1</span> &amp;&amp; c3 &gt;= <span class="number">1</span>)	c1 -= <span class="number">1</span>, c3 -= <span class="number">1</span>, ret++;	<span class="keyword">return</span> ret+c1+c2+c3+c4;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> stp)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> lft = calc();	<span class="keyword">bool</span> flag = <span class="literal">false</span>;</div><div class="line">	<span class="keyword">if</span> (stp &gt; ans)	<span class="keyword">return</span>;	ans = min(ans, stp+lft);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">2</span>; l+<span class="number">1</span> &lt; SIZE; l++) &#123;</div><div class="line">		<span class="keyword">int</span> tr = l;	<span class="keyword">while</span> (c[tr] &gt;= <span class="number">3</span> &amp;&amp; tr &lt; SIZE)	tr++;</div><div class="line">		<span class="keyword">if</span> (--tr-l+<span class="number">1</span> &lt; <span class="number">2</span>)	<span class="keyword">continue</span>;	flag = <span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> r = tr; r &gt;= l+<span class="number">1</span>; r--)	modify(l, r, <span class="number">-3</span>), DFS(stp+<span class="number">1</span>), modify(l, r, <span class="number">3</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">2</span>; l+<span class="number">2</span> &lt; SIZE; l++) &#123;</div><div class="line">		<span class="keyword">int</span> tr = l; <span class="keyword">while</span> (c[tr] &gt;= <span class="number">2</span> &amp;&amp; tr &lt; SIZE)	tr++;</div><div class="line">		<span class="keyword">if</span> (--tr-l+<span class="number">1</span> &lt; <span class="number">3</span>)	<span class="keyword">continue</span>;	flag = <span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> r = tr; r &gt;= l+<span class="number">2</span>; r--)	modify(l, r, <span class="number">-2</span>), DFS(stp+<span class="number">1</span>), modify(l, r, <span class="number">2</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">2</span>; l+<span class="number">4</span> &lt; SIZE; l++) &#123;</div><div class="line">		<span class="keyword">int</span> tr = l;	<span class="keyword">while</span> (c[tr] &gt;= <span class="number">1</span> &amp;&amp; tr &lt; SIZE)	tr++;</div><div class="line">		<span class="keyword">if</span> (--tr-l+<span class="number">1</span> &lt; <span class="number">5</span>)	<span class="keyword">continue</span>;	flag = <span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> r = tr; r &gt;= l+<span class="number">4</span>; r--)	modify(l, r, <span class="number">-1</span>), DFS(stp+<span class="number">1</span>), modify(l, r, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	lft = calc(), ans = min(ans, stp+lft);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> T;	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;T, &amp;n);</div><div class="line">	<span class="keyword">while</span> (T--) &#123;</div><div class="line">		init();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, a, b; i &lt; n; i++)	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b), a = a == <span class="number">1</span> ? <span class="number">13</span> : (a == <span class="number">0</span> ? <span class="number">0</span> : a<span class="number">-1</span>), c[a]++;</div><div class="line">		DFS(<span class="number">0</span>), <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BZOJ/">BZOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NOIp/">NOIp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/搜索/">搜索</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/贪心/">贪心</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-POJ2728 Desert King 二分+MST" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/POJ2728 Desert King 二分+MST/" class="article-date">
  	<time datetime="2017-10-23T16:00:00.000Z" itemprop="datePublished">2017-10-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/POJ2728 Desert King 二分+MST/">
        POJ728 Desert King &lt;二分+MST&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Desert King</p>
<p>David the Great has just become the king of a desert country. To win the respect of his people, he decided to build channels all over his country to bring water to every village. Villages which are connected to his capital village will be watered. As the dominate ruler and the symbol of wisdom in the country, he needs to build the channels in a most elegant way.<br>After days of study, he finally figured his plan out. He wanted the average cost of each mile of the channels to be minimized. In other words, the ratio of the overall cost of the channels to the total length must be minimized. He just needs to build the necessary channels to bring water to all the villages, which means there will be only one way to connect each village to the capital.<br>His engineers surveyed the country and recorded the position and altitude of each village. All the channels must go straight between two villages and be built horizontally. Since every two villages are at different altitudes, they concluded that each channel between two villages needed a vertical water lifter, which can lift water up or let water flow down. The length of the channel is the horizontal distance between the two villages. The cost of the channel is the height of the lifter. You should notice that each village is at a different altitude, and different channels can’t share a lifter. Channels can intersect safely and no three villages are on the same line.<br>As King David’s prime scientist and programmer, you are asked to find out the best solution to build the channels.</p>
<p>Input<br>There are several test cases. Each test case starts with a line containing a number N (2 &lt;= N &lt;= 1000), which is the number of villages. Each of the following N lines contains three integers, x, y and z (0 &lt;= x, y &lt; 10000, 0 &lt;= z &lt; 10000000). (x, y) is the position of the village and z is the altitude. The first village is the capital. A test case with N = 0 ends the input, and should not be processed.<br>Output<br>For each test case, output one line containing a decimal number, which is the minimum ratio of overall cost of the channels to the total length. This number should be rounded three digits after the decimal point. </p>
<p>Sample Input<br>4<br>0 0 0<br>0 1 1<br>1 1 2<br>1 0 3<br>0<br>Sample Output<br>1.000</p>
</blockquote>
<p>题目大意：给出n个村庄和n^2条路，以及每条路的长度和代价，要求选出一棵生成树使得其路径总代价除以路径总长度最小。</p>
<p>标签：最优比例生成树，二分答案，MST</p>
<p>本题是最优比例生成树的裸题。<br>熟悉二分答案的套路。</p>
<p>注意到如果一个答案x可作为平均值，那么比x大的所有答案均可作为平均值，问题具有二分性<br>于是二分答案，即最后的平均值，对于每个答案，构造最小生成树判断可行性，具体如下：<br>对于第i条边，长度为li，代价为ci，那么将此边的权值设为wi=ci-li*tans，跑一遍最小生成树，如果总权值小于0，则有可行解。<br>注意此题为稠密图，应用Prime。</p>
<p>附上AC代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 1000</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">double</span> <span class="built_in">map</span>[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>], val[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>];</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span><span class="keyword">double</span> x, y, h;&#125; p[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="keyword">double</span> x1, <span class="keyword">double</span> y1, <span class="keyword">double</span> x2, <span class="keyword">double</span> y2)</span> </span>&#123;<span class="keyword">return</span> <span class="built_in">sqrt</span>((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">double</span> t)</span> </span>&#123;</div><div class="line">	<span class="keyword">double</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">double</span> dis[MAX_N+<span class="number">5</span>];</div><div class="line">	<span class="keyword">bool</span> vis[MAX_N+<span class="number">5</span>];</div><div class="line">	<span class="built_in">memset</span>(dis, <span class="number">127</span>, <span class="keyword">sizeof</span>(dis));</div><div class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</div><div class="line">	dis[<span class="number">1</span>] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">		<span class="keyword">int</span> tv = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">			<span class="keyword">if</span> (!vis[j] &amp;&amp; (!tv || dis[j] &lt; dis[tv]))</div><div class="line">				tv = j;</div><div class="line">		vis[tv] = <span class="number">1</span>, ret += dis[tv];</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">			<span class="keyword">if</span> (!vis[j])</div><div class="line">				dis[j] = min(dis[j], val[tv][j]-<span class="built_in">map</span>[tv][j]*t);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret &lt; <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">bi_search</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">double</span> l = <span class="number">0</span>, r = <span class="number">1e5</span>, mid;</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">abs</span>(l-r) &gt; <span class="number">1e-6</span>) &#123;</div><div class="line">		mid = (l+r)/<span class="number">2</span>;</div><div class="line">		<span class="keyword">if</span> (check(mid))	r = mid;</div><div class="line">		<span class="keyword">else</span>	l = mid;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> mid;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) &amp;&amp; n) &#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	<span class="built_in">scanf</span>(<span class="string">"%lf%lf%lf"</span>, &amp;p[i].x, &amp;p[i].y, &amp;p[i].h);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</div><div class="line">				<span class="built_in">map</span>[i][j] = <span class="built_in">map</span>[j][i] = calc(p[i].x, p[i].y, p[j].x, p[j].y),</div><div class="line">				val[i][j] = val[j][i] = <span class="built_in">abs</span>(p[i].h-p[j].h);</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\n"</span>, bi_search());</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MST/">MST</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/POJ/">POJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/二分答案/">二分答案</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-BZOJ3993【SDOI2015】星际战争 二分+最大流" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/BZOJ3993【SDOI2015】星际战争 二分+最大流/" class="article-date">
  	<time datetime="2017-10-23T16:00:00.000Z" itemprop="datePublished">2017-10-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/BZOJ3993【SDOI2015】星际战争 二分+最大流/">
        BZOJ3993【SDOI2015】星际战争 &lt;二分+网络流&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>【SDOI2015】星际战争<br>Time Limit: 10 Sec  Memory Limit: 128 MBSec  Special Judge</p>
<p>Description<br>3333年，在银河系的某星球上，X军团和Y军团正在激烈地作战。在战斗的某一阶段，Y军团一共派遣了N个巨型机器人进攻X军团的阵地，其中第i个巨型机器人的装甲值为Ai。当一个巨型机器人的装甲值减少到0或者以下时，这个巨型机器人就被摧毁了。X军团有M个激光武器，其中第i个激光武器每秒可以削减一个巨型机器人Bi的装甲值。激光武器的攻击是连续的。这种激光武器非常奇怪，一个激光武器只能攻击一些特定的敌人。Y军团看到自己的巨型机器人被X军团一个一个消灭，他们急需下达更多的指令。为了这个目标，Y军团需要知道X军团最少需要用多长时间才能将Y军团的所有巨型机器人摧毁。但是他们不会计算这个问题，因此向你求助。</p>
<p>Input<br>第一行，两个整数，N、M。<br>第二行，N个整数，A1、A2…AN。<br>第三行，M个整数，B1、B2…BM。<br>接下来的M行，每行N个整数，这些整数均为0或者1。这部分中的第i行的第j个整数为0表示第i个激光武器不可以攻击第j个巨型机器人，为1表示第i个激光武器可以攻击第j个巨型机器人。<br>Output<br>一行，一个实数，表示X军团要摧毁Y军团的所有巨型机器人最少需要的时间。输出结果与标准答案的绝对误差不超过10-3即视为正确。</p>
<p>Sample Input<br>2 2<br>3 10<br>4 6<br>0 1<br>1 1<br>Sample Output<br>1.300000</p>
<p>HINT<br>【样例说明1】<br>战斗开始后的前0.5秒，激光武器1攻击2号巨型机器人，激光武器2攻击1号巨型机器人。1号巨型机器人被完全摧毁，2号巨型机器人还剩余8的装甲值；<br>接下来的0.8秒，激光武器1、2同时攻击2号巨型机器人。2号巨型机器人被完全摧毁。<br>对于全部的数据，1&lt;=N, M&lt;=50，1&lt;=Ai&lt;=105，1&lt;=Bi&lt;=1000，输入数据保证X军团一定能摧毁Y军团的所有巨型机器人</p>
</blockquote>
<p>标签：二分答案+网络流</p>
<p>如果直接处理这个问题，会发现限制有点多，不太好处理。<br>考虑二分答案。二分最少时间，那么每个激光炮在此时间内可造成的伤害就可以算出，这时只需判断合理分配这些伤害能否使敌方团灭。<br>发现可以建图跑最大流判断。从远点S向所有激光炮连边，容量为此激光炮可造成的总伤害。从所有机器人向汇点T连边，容量为机器人血量。从每个激光炮向其所可以造成伤害的所有机器人连边，容量为INF，这样跑一遍最大流，判断是否等于所有机器人的总血量即可。<br>建图可以不用全部新建，只用在开始的时候建一个图，二分判断时将所有S到激光炮的边容量改成b[i]*tans即可。</p>
<p>附上AC代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 100</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> EPS 1e-8</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x3f3f3f3f</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mid (l+r)/2</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> dnt;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span><span class="keyword">int</span> v, nxt; dnt c;&#125; E[MAX_N*MAX_N*<span class="number">5</span>+<span class="number">500</span>];	dnt sum;</div><div class="line"><span class="keyword">int</span> n, m, s, t, a[MAX_N+<span class="number">5</span>], b[MAX_N+<span class="number">5</span>], mrk[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>], pre[MAX_N+<span class="number">5</span>], d[MAX_N+<span class="number">5</span>], cnt;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;<span class="built_in">memset</span>(pre, <span class="number">-1</span>, <span class="keyword">sizeof</span>(pre)), cnt = <span class="number">0</span>, s = <span class="number">0</span>, t = n+m+<span class="number">1</span>;&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, dnt c)</span> </span>&#123;E[cnt].v = v, E[cnt].c = c, E[cnt].nxt = pre[u], pre[u] = cnt++;&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</div><div class="line">	init();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	insert(i, t, a[i]), insert(t, i, <span class="number">0</span>), sum += a[i];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)	insert(s, i+n, INF), insert(i+n, s, <span class="number">0</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)	<span class="keyword">if</span> (mrk[i][j])	insert(i+n, j, INF), insert(j, i+n, <span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; que;	<span class="built_in">memset</span>(d, <span class="number">-1</span>, <span class="keyword">sizeof</span>(d));	que.push(s), d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (!que.empty()) &#123;</div><div class="line">		<span class="keyword">int</span> u = que.front();	que.pop();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = pre[u]; ~i; i = E[i].nxt) &#123;</div><div class="line">			<span class="keyword">int</span> v = E[i].v;	<span class="keyword">if</span> (E[i].c &lt;= EPS || ~d[v])	<span class="keyword">continue</span>;</div><div class="line">			d[v] = d[u]+<span class="number">1</span>;	que.push(v);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ~d[t];</div><div class="line">&#125;</div><div class="line"><span class="function">dnt <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> u, dnt flow)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (u == t)	<span class="keyword">return</span> flow;	dnt ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = pre[u]; ~i; i = E[i].nxt) &#123;</div><div class="line">		<span class="keyword">int</span> v = E[i].v;	<span class="keyword">if</span> (E[i].c &lt;= EPS || d[v] != d[u]+<span class="number">1</span>)	<span class="keyword">continue</span>;</div><div class="line">		dnt tmp = DFS(v, min(flow, E[i].c));</div><div class="line">		E[i].c -= tmp, E[i^<span class="number">1</span>].c += tmp, ret += tmp, flow -= tmp;</div><div class="line">		<span class="keyword">if</span> (!flow)	<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (!ret)	d[u] = <span class="number">-1</span>;	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">chk</span><span class="params">(dnt tans)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cnt; i += <span class="number">2</span>)	E[i].c += E[i^<span class="number">1</span>].c, E[i^<span class="number">1</span>].c = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = pre[s]; ~i; i = E[i].nxt)	E[i].c = (dnt)b[E[i].v-n]*tans;</div><div class="line">	dnt tot = <span class="number">0</span>;	<span class="keyword">while</span> (BFS())	tot += DFS(s, INF);	<span class="keyword">return</span> <span class="built_in">fabs</span>(tot-sum) &lt;= EPS;</div><div class="line">&#125;</div><div class="line"><span class="function">dnt <span class="title">bi_search</span><span class="params">(dnt l, dnt r)</span> </span>&#123;</div><div class="line">	dnt ret = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</div><div class="line">		<span class="keyword">if</span> (chk(mid))	ret = r = mid;</div><div class="line">		<span class="keyword">else</span>	l = mid;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, a+i);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, b+i);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;mrk[i][j]);</div><div class="line">	build(), <span class="built_in">printf</span>(<span class="string">"%.5lf"</span>, bi_search(<span class="number">0</span>, INF));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BZOJ/">BZOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/二分答案/">二分答案</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/省选/">省选</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络流/">网络流</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-BZOJ1821【JSOI2010】Group部落划分 MST" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/BZOJ1821【JSOI2010】Group部落划分 MST/" class="article-date">
  	<time datetime="2017-10-23T16:00:00.000Z" itemprop="datePublished">2017-10-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/BZOJ1821【JSOI2010】Group部落划分 MST/">
        BZOJ1821【JSOI2010】Group部落划分 &lt;MST&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>【JSOI2010】Group 部落划分 Group<br>Time Limit: 10 Sec  Memory Limit: 64 MB</p>
<p>Description<br>聪聪研究发现，荒岛野人总是过着群居的生活，但是，并不是整个荒岛上的所有野人都属于同一个部落，野人们总是拉帮结派形成属于自己的部落，不同的部落之间则经常发生争斗。只是，这一切都成为谜团了——聪聪根本就不知道部落究竟是如何分布的。 不过好消息是，聪聪得到了一份荒岛的地图。地图上标注了N个野人居住的地点（可以看作是平面上的坐标）。我们知道，同一个部落的野人总是生活在附近。我们把两个部落的距离，定义为部落中距离最近的那两个居住点的距离。聪聪还获得了一个有意义的信息——这些野人总共被分为了K个部落！这真是个好消息。聪聪希望从这些信息里挖掘出所有部落的详细信息。他正在尝试这样一种算法： 对于任意一种部落划分的方法，都能够求出两个部落之间的距离，聪聪希望求出一种部落划分的方法，使靠得最近的两个部落尽可能远离。 例如，下面的左图表示了一个好的划分，而右图则不是。请你编程帮助聪聪解决这个难题。 </p>
<p>Input<br>第一行包含两个整数N和K(1&lt; = N &lt; = 1000,1&lt; K &lt; = N)，分别代表了野人居住点的数量和部落的数量。<br>接下来N行，每行包含两个正整数x,y，描述了一个居住点的坐标(0 &lt; =x, y &lt; =10000)<br>Output<br>输出一行，为最优划分时，最近的两个部落的距离，精确到小数点后两位。</p>
<p>Sample Input<br>4 2<br>0 0<br>0 1<br>1 1<br>1 0<br>Sample Output<br>1.00</p>
</blockquote>
<p>标签：MST</p>
<p>此题是MST的一个简单变形。<br>本题要求分为k个部落，即在生成树上拆k-1条边。<br>使得其最小距离最大，可以kruskal贪心向下选，选到剩k-1条边为止。</p>
<p>附上代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 1000</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> dnt;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span><span class="keyword">int</span> u, v;	dnt c;&#125; E[MAX_N*MAX_N+<span class="number">50</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span> <span class="params">(<span class="keyword">const</span> node &amp;a, <span class="keyword">const</span> node &amp;b)</span> </span>&#123;<span class="keyword">return</span> a.c &lt; b.c;&#125;</div><div class="line"><span class="keyword">int</span> n, k, cnt, x[MAX_N+<span class="number">5</span>], y[MAX_N+<span class="number">5</span>], fa[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	fa[i] = i;&#125;</div><div class="line"><span class="function">dnt <span class="title">dist</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;<span class="keyword">return</span> (dnt)<span class="built_in">sqrt</span>((x[a]-x[b])*(x[a]-x[b])+(y[a]-y[b])*(y[a]-y[b]));&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getf</span><span class="params">(<span class="keyword">int</span> c)</span> </span>&#123;<span class="keyword">return</span> fa[c] == c ? c : fa[c] = getf(fa[c]);&#125;</div><div class="line"><span class="function">dnt <span class="title">Kruskal</span><span class="params">()</span> </span>&#123;</div><div class="line">	sort(E, E+cnt, cmp);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, tot = <span class="number">0</span>; i &lt; cnt; i++) &#123;</div><div class="line">		<span class="keyword">int</span> u = getf(E[i].u), v = getf(E[i].v);</div><div class="line">		<span class="keyword">if</span> (u != v)	fa[u] = v, tot++;</div><div class="line">		<span class="keyword">if</span> (tot &gt; n-k)	<span class="keyword">return</span> E[i].c;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k), init();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x[i], &amp;y[i]);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt;= n; j++)	E[cnt++] = (node)&#123;i, j, dist(i, j)&#125;;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%.2lf"</span>, Kruskal());</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BZOJ/">BZOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MST/">MST</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/省选/">省选</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 Azrael_Death
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
  <script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>
<!--
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->



  </div>
</body>
</html>