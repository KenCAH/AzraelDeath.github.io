<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>NIRVANA</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Blog of a Chinese OIer">
<meta property="og:type" content="website">
<meta property="og:title" content="NIRVANA">
<meta property="og:url" content="http://yoursite.com/page/12/index.html">
<meta property="og:site_name" content="NIRVANA">
<meta property="og:description" content="Blog of a Chinese OIer">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NIRVANA">
<meta name="twitter:description" content="Blog of a Chinese OIer">
  
    <link rel="alternative" href="/atom.xml" title="NIRVANA" type="application/atom+xml">
  
  
    <link rel="icon" href="http://chuantu.biz/t6/89/1507626502x2728279003.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://chuantu.biz/t6/89/1507626502x2728279003.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Azrael_Death</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Veni Vidi Vici</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/AzraelDeath" title="github">github</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/azraeldeath" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/2-SAT/" style="font-size: 10.77px;">2-SAT</a> <a href="/tags/AC自动机/" style="font-size: 10.77px;">AC自动机</a> <a href="/tags/AMPPZ/" style="font-size: 13.08px;">AMPPZ</a> <a href="/tags/APIO/" style="font-size: 10px;">APIO</a> <a href="/tags/BZOJ/" style="font-size: 20px;">BZOJ</a> <a href="/tags/CDQ分治/" style="font-size: 10px;">CDQ分治</a> <a href="/tags/DFS序/" style="font-size: 10px;">DFS序</a> <a href="/tags/DP/" style="font-size: 15.38px;">DP</a> <a href="/tags/HDU/" style="font-size: 12.31px;">HDU</a> <a href="/tags/IOI/" style="font-size: 10px;">IOI</a> <a href="/tags/LCA/" style="font-size: 12.31px;">LCA</a> <a href="/tags/LG/" style="font-size: 12.31px;">LG</a> <a href="/tags/MST/" style="font-size: 13.08px;">MST</a> <a href="/tags/Manacher/" style="font-size: 10.77px;">Manacher</a> <a href="/tags/NOI/" style="font-size: 10.77px;">NOI</a> <a href="/tags/NOIp/" style="font-size: 13.85px;">NOIp</a> <a href="/tags/POI/" style="font-size: 10px;">POI</a> <a href="/tags/POJ/" style="font-size: 14.62px;">POJ</a> <a href="/tags/Tarjan/" style="font-size: 10.77px;">Tarjan</a> <a href="/tags/Trie/" style="font-size: 10px;">Trie</a> <a href="/tags/UVa/" style="font-size: 10px;">UVa</a> <a href="/tags/主席树/" style="font-size: 12.31px;">主席树</a> <a href="/tags/二分图/" style="font-size: 10px;">二分图</a> <a href="/tags/二分答案/" style="font-size: 10.77px;">二分答案</a> <a href="/tags/分块/" style="font-size: 10px;">分块</a> <a href="/tags/图论/" style="font-size: 19.23px;">图论</a> <a href="/tags/字符串/" style="font-size: 12.31px;">字符串</a> <a href="/tags/差分/" style="font-size: 10px;">差分</a> <a href="/tags/差分约束系统/" style="font-size: 10px;">差分约束系统</a> <a href="/tags/并查集/" style="font-size: 10.77px;">并查集</a> <a href="/tags/总结/" style="font-size: 16.92px;">总结</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数位DP/" style="font-size: 10.77px;">数位DP</a> <a href="/tags/数据结构/" style="font-size: 17.69px;">数据结构</a> <a href="/tags/数论数学/" style="font-size: 11.54px;">数论数学</a> <a href="/tags/最大团/" style="font-size: 10px;">最大团</a> <a href="/tags/最小割/" style="font-size: 12.31px;">最小割</a> <a href="/tags/最短路/" style="font-size: 10px;">最短路</a> <a href="/tags/最短路径/" style="font-size: 10px;">最短路径</a> <a href="/tags/期望DP/" style="font-size: 10px;">期望DP</a> <a href="/tags/构造/" style="font-size: 10px;">构造</a> <a href="/tags/树分治/" style="font-size: 11.54px;">树分治</a> <a href="/tags/树套树/" style="font-size: 10.77px;">树套树</a> <a href="/tags/树状数组/" style="font-size: 11.54px;">树状数组</a> <a href="/tags/树相关/" style="font-size: 10.77px;">树相关</a> <a href="/tags/树链剖分/" style="font-size: 10px;">树链剖分</a> <a href="/tags/模拟/" style="font-size: 10.77px;">模拟</a> <a href="/tags/状压DP/" style="font-size: 11.54px;">状压DP</a> <a href="/tags/省选/" style="font-size: 18.46px;">省选</a> <a href="/tags/线段树/" style="font-size: 13.08px;">线段树</a> <a href="/tags/组合数学/" style="font-size: 10px;">组合数学</a> <a href="/tags/网络流/" style="font-size: 16.15px;">网络流</a> <a href="/tags/莫队/" style="font-size: 10.77px;">莫队</a> <a href="/tags/补集转换/" style="font-size: 10px;">补集转换</a> <a href="/tags/贪心/" style="font-size: 10px;">贪心</a> <a href="/tags/费用流/" style="font-size: 10px;">费用流</a> <a href="/tags/队列/" style="font-size: 10px;">队列</a> <a href="/tags/随机化/" style="font-size: 10.77px;">随机化</a> <a href="/tags/高斯消元/" style="font-size: 10px;">高斯消元</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.csdn.net/OwenOwl">OwenOwl</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.csdn.net/Joker_69">Joker</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://dangxingyu.com">DXY</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://309459245.lofter.com">YJQ</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/candy99">Candy</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/zig-zag">ZigZag</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://cxjyxx.me">cxjyxx_me</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.shuizilong.com">ShuiZiLong</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/kuangbin">KuangBin</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Azrael_Death</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://chuantu.biz/t6/89/1507626502x2728279003.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Azrael_Death</h1>
			</hgroup>
			
			<p class="header-subtitle">Veni Vidi Vici</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/AzraelDeath" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/azraeldeath" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-BZOJ1189【HNOI2007】紧急疏散evacuate 二分答案+网络流" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/BZOJ1189【HNOI2007】紧急疏散evacuate 二分答案+网络流/" class="article-date">
  	<time datetime="2017-09-15T16:00:00.000Z" itemprop="datePublished">2017-09-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/BZOJ1189【HNOI2007】紧急疏散evacuate 二分答案+网络流/">
        BZOJ1189【HNOI2007】紧急疏散evacuate &lt;二分答案+网络流&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>&#x3010;HNOI2007&#x3011;&#x7D27;&#x6025;&#x758F;&#x6563;evacuate</p>
<p>Time Limit: 10 Sec<br>Memory Limit: 128 MB</p>
<p>Description<br>&#x53D1;&#x751F;&#x4E86;&#x706B;&#x8B66;&#xFF0C;&#x6240;&#x6709;&#x4EBA;&#x5458;&#x9700;&#x8981;&#x7D27;&#x6025;&#x758F;&#x6563;&#xFF01;&#x5047;&#x8BBE;&#x6BCF;&#x4E2A;&#x623F;&#x95F4;&#x662F;&#x4E00;&#x4E2A;N M&#x7684;&#x77E9;&#x5F62;&#x533A;&#x57DF;&#x3002;&#x6BCF;&#x4E2A;&#x683C;&#x5B50;&#x5982;&#x679C;&#x662F;&#x2019;.&#x2019;&#xFF0C;&#x90A3;&#x4E48;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x5757;&#x7A7A;&#x5730;&#xFF1B;&#x5982;&#x679C;&#x662F;&#x2019;X&#x2019;&#xFF0C;&#x90A3;&#x4E48;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x9762;&#x5899;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x2019;D&#x2019;&#xFF0C;&#x90A3;&#x4E48;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x6247;&#x95E8;&#xFF0C;&#x4EBA;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;&#x8FD9;&#x513F;&#x64A4;&#x51FA;&#x623F;&#x95F4;&#x3002;&#x5DF2;&#x77E5;&#x95E8;&#x4E00;&#x5B9A;&#x5728;&#x623F;&#x95F4;&#x7684;&#x8FB9;&#x754C;&#x4E0A;&#xFF0C;&#x5E76;&#x4E14;&#x8FB9;&#x754C;&#x4E0A;&#x4E0D;&#x4F1A;&#x6709;&#x7A7A;&#x5730;&#x3002;&#x6700;&#x521D;&#xFF0C;&#x6BCF;&#x5757;&#x7A7A;&#x5730;&#x4E0A;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x4EBA;&#xFF0C;&#x5728;&#x758F;&#x6563;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BCF;&#x4E00;&#x79D2;&#x949F;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x5411;&#x4E0A;&#x4E0B;&#x5DE6;&#x53F3;&#x56DB;&#x4E2A;&#x65B9;&#x5411;&#x79FB;&#x52A8;&#x4E00;&#x683C;&#xFF0C;&#x5F53;&#x7136;&#x4ED6;&#x4E5F;&#x53EF;&#x4EE5;&#x7AD9;&#x7740;&#x4E0D;&#x52A8;&#x3002;&#x758F;&#x6563;&#x5F00;&#x59CB;&#x540E;&#xFF0C;&#x6BCF;&#x5757;&#x7A7A;&#x5730;&#x4E0A;&#x5C31;&#x6CA1;&#x6709;&#x4EBA;&#x6570;&#x9650;&#x5236;&#x4E86;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x6BCF;&#x5757;&#x7A7A;&#x5730;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x7AD9;&#x65E0;&#x6570;&#x4E2A;&#x4EBA;&#xFF09;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x95E8;&#x5F88;&#x7A84;&#xFF0C;&#x6BCF;&#x4E00;&#x79D2;&#x949F;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x4EBA;&#x79FB;&#x52A8;&#x5230;&#x95E8;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E00;&#x65E6;&#x79FB;&#x52A8;&#x5230;&#x95E8;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x4ED6;&#x5DF2;&#x7ECF;&#x5B89;&#x5168;&#x64A4;&#x79BB;&#x4E86;&#x3002;&#x73B0;&#x5728;&#x7684;&#x95EE;&#x9898;&#x662F;&#xFF1A;&#x5982;&#x679C;&#x5E0C;&#x671B;&#x6240;&#x6709;&#x7684;&#x4EBA;&#x5B89;&#x5168;&#x64A4;&#x79BB;&#xFF0C;&#x6700;&#x77ED;&#x9700;&#x8981;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#xFF1F;&#x6216;&#x8005;&#x544A;&#x77E5;&#x6839;&#x672C;&#x4E0D;&#x53EF;&#x80FD;&#x3002;</p>
<p>Input<br>&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x662F;&#x7531;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#x7684;&#x4E00;&#x5BF9;&#x6B63;&#x6574;&#x6570;N&#x4E0E;M&#xFF0C;3&lt;=N &lt;=20&#xFF0C;3&lt;=M&lt;=20&#xFF0C;&#x4EE5;&#x4E0B;N&#x884C;M&#x5217;&#x63CF;&#x8FF0;&#x4E00;&#x4E2A;N M&#x7684;&#x77E9;&#x9635;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x53EF;&#x4E3A;&#x5B57;&#x7B26;&#x2019;.&#x2019;&#x3001;&#x2019;X&#x2019;&#x548C;&#x2019;D&#x2019;&#xFF0C;&#x4E14;&#x5B57;&#x7B26;&#x95F4;&#x65E0;&#x7A7A;&#x683C;&#x3002;<br>Output<br>&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6574;&#x6570;K&#xFF0C;&#x8868;&#x793A;&#x8BA9;&#x6240;&#x6709;&#x4EBA;&#x5B89;&#x5168;&#x64A4;&#x79BB;&#x7684;&#x6700;&#x77ED;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x53EF;&#x80FD;&#x64A4;&#x79BB;&#xFF0C;&#x90A3;&#x4E48;&#x8F93;&#x51FA;&#x2019;impossible&#x2019;&#xFF08;&#x4E0D;&#x5305;&#x62EC;&#x5F15;&#x53F7;&#xFF09;&#x3002;</p>
<p>Sample Input<br>5 5<br>XXXXX<br>X&#x2026;D<br>XX.XX<br>X..XX<br>XXDXX<br>Sample Output<br>3</p>
<p>HINT<br><strong><font color="#FF0000">2015.1.12&#x65B0;&#x52A0;&#x6570;&#x636E;&#x4E00;&#x7EC4;&#xFF0C;&#x9E23;&#x8C22;1756500824<font color="#000000"></font></font></strong><br>C++&#x8BED;&#x8A00;&#x8BF7;&#x7528;scanf(&#x201C;%s&#x201D;,s)&#x8BFB;&#x5165;&#xFF01;</p>
</blockquote>
<p>&#x6807;&#x7B7E;&#xFF1A;&#x4E8C;&#x5206;&#x7B54;&#x6848;+&#x7F51;&#x7EDC;&#x6D41;</p>
<p>&#x8FD9;&#x9898;&#x771F;&#x5751;&#x903C;&#xFF0C;&#x8C03;&#x4E86;&#x4E24;&#x5C0F;&#x65F6;&#x3002;&#x5751;&#x70B9;&#x5DF2;&#x7528;&#x7EA2;&#x8272;&#x52A0;&#x7C97;</p>
<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x5730;&#x60F3;&#x5230;&#x9700;&#x8981;&#x4EE5;&#x6BCF;&#x4E2A;&#x95E8;&#x4E3A;&#x8D77;&#x70B9;BFS&#xFF0C;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x70B9;&#x5230;&#x6BCF;&#x4E2A;&#x95E8;&#x7684;&#x8DDD;&#x79BB;&#x662F;&#x591A;&#x5C11;&#x3002;&#x7136;&#x540E;&#x4E8C;&#x5206;&#x7B54;&#x6848;&#xFF0C;&#x5BF9;&#x4E8E;&#x5F53;&#x524D;&#x7B54;&#x6848;tans&#xFF0C;&#x5EFA;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br>&#x4ECE;&#x6E90;&#x70B9;&#x5411;&#x6BCF;&#x4E2A;&#x6709;&#x4EBA;&#x7684;&#x70B9;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;1&#x7684;&#x8FB9;&#xFF0C;&#x4ECE;&#x6BCF;&#x4E2A;&#x95E8;&#x5411;&#x6C47;&#x70B9;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;tans&#x7684;&#x8FB9;&#x3002;&#x7136;&#x540E;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x4EBA;&#xFF0C;&#x679A;&#x4E3E;&#x6BCF;&#x4E2A;&#x95E8;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x4EBA;&#x5230;&#x67D0;&#x4E2A;&#x95E8;&#x7684;&#x8DDD;&#x79BB;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;tans&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x4EBA;&#x4E00;&#x5B9A;&#x4F1A;&#x5728;tans&#x65F6;&#x9650;&#x5185;&#x5230;&#x8FBE;&#x8FD9;&#x4E2A;&#x95E8;&#x524D;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4ECE;&#x8FD9;&#x4E2A;&#x4EBA;&#x5411;&#x8FD9;&#x4E2A;&#x95E8;&#x8FDE;&#x4E00;&#x6761;&#x5BB9;&#x91CF;&#x4E3A;1&#x7684;&#x8FB9;&#x3002;&#x8DD1;&#x4E00;&#x904D;&#x6700;&#x5927;&#x6D41;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x91CF;&#x7B49;&#x4E8E;&#x4EBA;&#x6570;&#xFF0C;&#x5219;&#x53EF;&#x884C;&#x3002;<br>&#x5199;&#x51FA;&#x6765;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#define MAX_N 500</div><div class="line">#define MAX_M 400000</div><div class="line">#define INF 2147483647</div><div class="line">using namespace std;</div><div class="line">int n, m, s, t, id[20][20], ind, tot, num, pre[MAX_N+5], cnt;   char map[20][20];</div><div class="line">vector &lt;int&gt; G[MAX_N+5], exi; int dis[MAX_N+5][MAX_N+5];  bool vis[MAX_N+5];</div><div class="line">int nxt[4][2] = {{0, 1}, {0, -1}, {1, 0}, {-1, 0}};</div><div class="line">struct node {int v, c, nxt;} E[MAX_M+5];</div><div class="line">void init() {cnt = 0;   s = 0, t = n*m+1;   memset(pre, -1, sizeof(pre));}</div><div class="line">void insert(int u, int v, int c) {E[cnt].v = v, E[cnt].c = c, E[cnt].nxt = pre[u], pre[u] = cnt++;</div><div class="line">                                  E[cnt].v = u, E[cnt].c = 0, E[cnt].nxt = pre[v], pre[v] = cnt++;}</div><div class="line">char gc(int x) {return map[(x-1)/m][(x-1)%m];}</div><div class="line">void BFS(int beg, int k) {</div><div class="line">    memset(vis, false, sizeof(vis));</div><div class="line">    for (int i = 1; i &lt;= n*m; i++)   dis[i][k] = INF;</div><div class="line">    queue &lt;int&gt; que;  dis[beg][k] = 0, que.push(beg), vis[beg] = true;</div><div class="line">    while (!que.empty()) {</div><div class="line">        int u = que.front();    que.pop();</div><div class="line">        for (int i = 0; i &lt; G[u].size(); i++) {</div><div class="line">            int v = G[u][i];    if (vis[v] || gc(v) != &apos;.&apos;) continue;</div><div class="line">            dis[v][k] = dis[u][k]+1, que.push(v), vis[v] = true;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line">int d[MAX_N+5];</div><div class="line">bool BFS() {</div><div class="line">    memset(d, -1, sizeof(d));</div><div class="line">    queue &lt;int&gt; que;  que.push(s), d[s] = 0;</div><div class="line">    while (!que.empty()) {</div><div class="line">        int u = que.front();    que.pop();</div><div class="line">        for (int i = pre[u]; ~i; i = E[i].nxt) {</div><div class="line">            int v = E[i].v; if (~d[v] || !E[i].c)   continue;</div><div class="line">            d[v] = d[u]+1, que.push(v);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    return ~d[t];</div><div class="line">}</div><div class="line">int DFS(int u, int flow) {</div><div class="line">    if (u == t) return flow;</div><div class="line">    int ret = 0;</div><div class="line">    for (int i = pre[u]; ~i; i = E[i].nxt) {</div><div class="line">        int v = E[i].v, c = E[i].c;</div><div class="line">        if (d[v] != d[u]+1 || !c)   continue;</div><div class="line">        int tmp = DFS(v, min(flow, c));</div><div class="line">        E[i].c -= tmp, E[i^1].c += tmp, flow -= tmp, ret += tmp;</div><div class="line">        if (!flow)  break;</div><div class="line">    }</div><div class="line">    if (!ret)   d[u] = -1;</div><div class="line">    return ret;</div><div class="line">}</div><div class="line">bool check(int tans) {</div><div class="line">    init();</div><div class="line">    for (int i = 0; i &lt; n; i++)  for (int j = 0; j &lt; m; j++)  if (map[i][j] == &apos;.&apos;)   insert(s, id[i][j], 1);</div><div class="line">    for (int k = 0; k &lt; exi.size(); k++) insert(exi[k], t, tans);</div><div class="line">    for (int i = 0; i &lt; n; i++)  for (int j = 0; j &lt; m; j++)  if (map[i][j] == &apos;.&apos;)</div><div class="line">        for (int k = 0; k &lt; exi.size(); k++) if (dis[id[i][j]][k] &lt;= tans)    insert(id[i][j], exi[k], 1);</div><div class="line">//  for (int i = 0; i &lt; cnt; i++)    cout &lt;&lt; E[i^1].v &lt;&lt; &quot; &quot; &lt;&lt; E[i].v &lt;&lt; &quot; &quot; &lt;&lt; E[i].c &lt;&lt; endl; cout &lt;&lt; endl;</div><div class="line">    int ret = 0;</div><div class="line">    while (BFS())   ret += DFS(s, INF);</div><div class="line">    return ret == num;</div><div class="line">}</div><div class="line">int bi_search(int l, int r) {</div><div class="line">    int ret;</div><div class="line">    while (l &lt;= r) {</div><div class="line">        int mid = l+r&gt;&gt;1;</div><div class="line">        if (check(mid)) ret = mid, r = mid-1;</div><div class="line">        else    l = mid+1;</div><div class="line">    }</div><div class="line">    return ret;</div><div class="line">}</div><div class="line">int main() {</div><div class="line">    scanf(&quot;%d%d&quot;, &amp;n, &amp;m);</div><div class="line">    for (int i = 0; i &lt; n; i++)  for (int j = 0; j &lt; m; j++)  id[i][j] = ++ind;</div><div class="line">    for (int i = 0; i &lt; n; i++)  scanf(&quot;%s&quot;, map[i]);</div><div class="line">    for (int i = 0; i &lt; n; i++)  for (int j = 0; j &lt; m; j++)  for (int k = 0; k &lt; 4; k++) {</div><div class="line">        int x = i+nxt[k][0], y = j+nxt[k][1];</div><div class="line">        if (x &lt; 0 || x &gt;= n || y &lt; 0 || y &gt;= m || map[i][j] == &apos;X&apos; || map[x][y] == &apos;X&apos;) continue;</div><div class="line">        G[id[i][j]].push_back(id[x][y]);</div><div class="line">    }</div><div class="line">//  for (int i = 1; i &lt;= n*m; i++) {cout &lt;&lt; i &lt;&lt; endl;for (int j = 0; j &lt; G[i].size(); j++)   cout &lt;&lt; G[i][j] &lt;&lt; &quot; &quot;; cout &lt;&lt; endl;}</div><div class="line">    for (int i = 0; i &lt; n; i++)  for (int j = 0; j &lt; m; j++)  if (map[i][j] == &apos;.&apos;)   num++;</div><div class="line">    for (int i = 0; i &lt; n; i++)  for (int j = 0; j &lt; m; j++)  if (map[i][j] == &apos;D&apos;)   exi.push_back(id[i][j]);</div><div class="line">    for (int i = 0; i &lt; exi.size(); i++) BFS(exi[i], i);</div><div class="line">//  for (int k = 0; k &lt; exi.size(); k++) {for (int i = 0; i &lt; n; i++) {for (int j = 0; j &lt; m; j++) cout &lt;&lt; dis[id[i][j]][k] &lt;&lt; &quot; &quot;;cout &lt;&lt; endl;}cout &lt;&lt; endl;}</div><div class="line">    int ans = bi_search(0, m*n);</div><div class="line">    if</div><div class="line"></div><div class="line"> (ans &lt; m*n)   printf(&quot;%d&quot;, ans);</div><div class="line">    else    printf(&quot;impossible&quot;);</div><div class="line">    return 0;</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>&#x7136;&#x800C;WA&#x6389;&#x4E86;&#x3002;<br>&#x539F;&#x56E0;&#x5F88;&#x7B80;&#x5355;&#xFF1A;&#x67D0;&#x4F4D;&#x795E;&#x7287;&#x51FA;&#x4E86;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#xFF1A;</p>
<blockquote>
<p>4 5<br>XXDXX<br>XX . XX<br>X .  .  . X<br>XXDXX</p>
<p>ans=3 </p>
</blockquote>
<p>&#x7136;&#x800C;&#x7528;&#x521A;&#x521A;&#x7684;&#x65B9;&#x6CD5;&#x505A;&#x7B54;&#x6848;&#x662F;2&#x3002;<br>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;(3, 2)&#x548C;(3, 4)&#x90FD;&#x5728;2&#x65F6;&#x523B;&#x5230;&#x8FBE;(4, 3)&#x7684;&#x95E8;&#x524D;&#xFF0C;&#x4E24;&#x4E2A;&#x4EBA;&#x5206;&#x522B;&#x8FC7;&#x9700;&#x8981;&#x591A;&#x4E00;&#x79D2;&#x949F;&#x3002;<br>QAQ~~~<br>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x53E6;&#x4E00;&#x79CD;&#x5EFA;&#x6A21;&#x65B9;&#x5F0F;&#xFF1A;<br>&#x9996;&#x5148;&#x6E90;&#x70B9;&#x5411;&#x6240;&#x6709;&#x4EBA;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;1&#x7684;&#x8FB9;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6BCF;&#x4E2A;&#x95E8;&#x62C6;&#x6210;tans&#x4E2A;&#x70B9;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4EBA;&#x5230;&#x67D0;&#x95E8;&#x7684;&#x65F6;&#x95F4;&#x4E3A;t&#xFF0C;&#x5219;&#x4ECE;&#x8FD9;&#x4E2A;&#x4EBA;&#x5411;&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x7B2C;t&#x5230;tans&#x4E2A;&#x70B9;&#x90FD;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;1&#x7684;&#x8FB9;&#x3002;&#x6700;&#x540E;&#x628A;&#x6BCF;&#x4E2A;&#x95E8;&#x7684;tans&#x4E2A;&#x70B9;&#x5411;&#x6C47;&#x70B9;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;1&#x7684;&#x8FB9;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x6700;&#x540E;&#x9644;&#x4E0A;AC&#x4EE3;&#x7801;&#xFF08;&#x5199;&#x5F97;&#x4E11;&#xFF0C;&#x52FF;&#x55B7;&#xFF09;&#xFF1A;<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 50000</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_M 1000000</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 2147483647</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, m, s, t, id[<span class="number">20</span>][<span class="number">20</span>], ind, tot, num, pre[MAX_N+<span class="number">5</span>], cnt;	<span class="keyword">char</span> <span class="built_in">map</span>[<span class="number">20</span>][<span class="number">20</span>];</div><div class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; G[MAX_N+<span class="number">5</span>], exi;	<span class="keyword">int</span> dis[MAX_N+<span class="number">5</span>][<span class="number">500</span>];	<span class="keyword">bool</span> vis[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="keyword">int</span> nxt[<span class="number">4</span>][<span class="number">2</span>] = {{<span class="number">0</span>, <span class="number">1</span>}, {<span class="number">0</span>, <span class="number">-1</span>}, {<span class="number">1</span>, <span class="number">0</span>}, {<span class="number">-1</span>, <span class="number">0</span>}};</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span><span class="keyword">int</span> v, c, nxt;} E[MAX_M+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{cnt = <span class="number">0</span>;	s = <span class="number">0</span>, t = MAX_N;	<span class="built_in">memset</span>(pre, <span class="number">-1</span>, <span class="keyword">sizeof</span>(pre));}</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span> </span>{E[cnt].v = v, E[cnt].c = c, E[cnt].nxt = pre[u], pre[u] = cnt++;</div><div class="line">								  E[cnt].v = u, E[cnt].c = <span class="number">0</span>, E[cnt].nxt = pre[v], pre[v] = cnt++;}</div><div class="line"><span class="function"><span class="keyword">char</span> <span class="title">gc</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{<span class="keyword">return</span> <span class="built_in">map</span>[(x<span class="number">-1</span>)/m][(x<span class="number">-1</span>)%m];}</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">(<span class="keyword">int</span> beg, <span class="keyword">int</span> k)</span> </span>{</div><div class="line">	<span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n*m; i++)	dis[i][k] = INF;</div><div class="line">	<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; que;	dis[beg][k] = <span class="number">0</span>, que.push(beg), vis[beg] = <span class="literal">true</span>;</div><div class="line">	<span class="keyword">while</span> (!que.empty()) {</div><div class="line">		<span class="keyword">int</span> u = que.front();	que.pop();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].size(); i++) {</div><div class="line">			<span class="keyword">int</span> v = G[u][i];	<span class="keyword">if</span> (vis[v] || gc(v) != <span class="string">&apos;.&apos;</span>)	<span class="keyword">continue</span>;</div><div class="line">			dis[v][k] = dis[u][k]+<span class="number">1</span>, que.push(v), vis[v] = <span class="literal">true</span>;</div><div class="line">		}</div><div class="line">	}</div><div class="line">}</div><div class="line"><span class="keyword">int</span> d[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">memset</span>(d, <span class="number">-1</span>, <span class="keyword">sizeof</span>(d));</div><div class="line">	<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; que;	que.push(s), d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (!que.empty()) {</div><div class="line">		<span class="keyword">int</span> u = que.front();	que.pop();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = pre[u]; ~i; i = E[i].nxt) {</div><div class="line">			<span class="keyword">int</span> v = E[i].v;	<span class="keyword">if</span> (~d[v] || !E[i].c)	<span class="keyword">continue</span>;</div><div class="line">			d[v] = d[u]+<span class="number">1</span>, que.push(v);</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> ~d[t];</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span> </span>{</div><div class="line">	<span class="keyword">if</span> (u == t)	<span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = pre[u]; ~i; i = E[i].nxt) {</div><div class="line">		<span class="keyword">int</span> v = E[i].v, c = E[i].c;</div><div class="line">		<span class="keyword">if</span> (d[v] != d[u]+<span class="number">1</span> || !c)	<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">int</span> tmp = DFS(v, min(flow, c));</div><div class="line">		E[i].c -= tmp, E[i^<span class="number">1</span>].c += tmp, flow -= tmp, ret += tmp;</div><div class="line">		<span class="keyword">if</span> (!flow)	<span class="keyword">break</span>;</div><div class="line">	}</div><div class="line">	<span class="keyword">if</span> (!ret)	d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> tans)</span> </span>{</div><div class="line">	init();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)	<span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == <span class="string">&apos;.&apos;</span>)	insert(s, id[i][j], <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; exi.size(); k++)	<span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>; l &lt;= tans; l++)	insert(n*m+l*exi.size()+k, t, <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)	<span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == <span class="string">&apos;.&apos;</span>)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; exi.size(); k++)	<span class="keyword">if</span> (dis[id[i][j]][k] &lt;= tans)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> l = dis[id[i][j]][k]; l &lt;= tans; l++)	insert(id[i][j], n*m+l*exi.size()+k, <span class="number">1</span>);</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (BFS())	ret += DFS(s, INF);</div><div class="line">	<span class="keyword">return</span> ret == num;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bi_search</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>{</div><div class="line">	<span class="keyword">int</span> ret;</div><div class="line">	<span class="keyword">while</span> (l &lt;= r) {</div><div class="line">		<span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span> (check(mid))	ret = mid, r = mid<span class="number">-1</span>;</div><div class="line">		<span class="keyword">else</span>	l = mid+<span class="number">1</span>;</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)	id[i][j] = ++ind;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, <span class="built_in">map</span>[i]);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)	<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) {</div><div class="line">		<span class="keyword">int</span> x = i+nxt[k][<span class="number">0</span>], y = j+nxt[k][<span class="number">1</span>];</div><div class="line">		<span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= n || y &lt; <span class="number">0</span> || y &gt;= m || <span class="built_in">map</span>[i][j] == <span class="string">&apos;X&apos;</span> || <span class="built_in">map</span>[x][y] == <span class="string">&apos;X&apos;</span>)	<span class="keyword">continue</span>;</div><div class="line">		G[id[i][j]].push_back(id[x][y]);</div><div class="line">	}</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)	<span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == <span class="string">&apos;.&apos;</span>)	num++;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)	<span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == <span class="string">&apos;D&apos;</span>)	exi.push_back(id[i][j]);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; exi.size(); i++)	BFS(exi[i], i);</div><div class="line">	<span class="keyword">int</span> ans = bi_search(<span class="number">0</span>, m*n);</div><div class="line">	<span class="keyword">if</span> (ans &lt; m*n)	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ans);</div><div class="line">	<span class="keyword">else</span>	<span class="built_in">printf</span>(<span class="string">&quot;impossible&quot;</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BZOJ/">BZOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/图论/">图论</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/省选/">省选</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络流/">网络流</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-BZOJ1066【SCOI2007】蜥蜴 网络流" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/BZOJ1066【SCOI2007】蜥蜴 网络流/" class="article-date">
  	<time datetime="2017-09-14T16:00:00.000Z" itemprop="datePublished">2017-09-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/BZOJ1066【SCOI2007】蜥蜴 网络流/">
        BZOJ1066【SCOI2007】蜥蜴 &lt;网络流&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>&#x3010;SCOI2007&#x3011;&#x8725;&#x8734;</p>
<p>Description<br>&#x5728;&#x4E00;&#x4E2A;r&#x884C;c&#x5217;&#x7684;&#x7F51;&#x683C;&#x5730;&#x56FE;&#x4E2D;&#x6709;&#x4E00;&#x4E9B;&#x9AD8;&#x5EA6;&#x4E0D;&#x540C;&#x7684;&#x77F3;&#x67F1;&#xFF0C;&#x4E00;&#x4E9B;&#x77F3;&#x67F1;&#x4E0A;&#x7AD9;&#x7740;&#x4E00;&#x4E9B;&#x8725;&#x8734;&#xFF0C;&#x4F60;&#x7684;&#x4EFB;&#x52A1;&#x662F;&#x8BA9;&#x5C3D;&#x91CF;&#x591A;&#x7684;&#x8725;&#x8734;&#x9003;&#x5230;&#x8FB9;&#x754C;&#x5916;&#x3002; &#x6BCF;&#x884C;&#x6BCF;&#x5217;&#x4E2D;&#x76F8;&#x90BB;&#x77F3;&#x67F1;&#x7684;&#x8DDD;&#x79BB;&#x4E3A;1&#xFF0C;&#x8725;&#x8734;&#x7684;&#x8DF3;&#x8DC3;&#x8DDD;&#x79BB;&#x662F;d&#xFF0C;&#x5373;&#x8725;&#x8734;&#x53EF;&#x4EE5;&#x8DF3;&#x5230;&#x5E73;&#x9762;&#x8DDD;&#x79BB;&#x4E0D;&#x8D85;&#x8FC7;d&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x77F3;&#x67F1;&#x4E0A;&#x3002;&#x77F3;&#x67F1;&#x90FD;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x6BCF;&#x6B21;&#x5F53;&#x8725;&#x8734;&#x8DF3;&#x8DC3;&#x65F6;&#xFF0C;&#x6240;&#x79BB;&#x5F00;&#x7684;&#x77F3;&#x67F1;&#x9AD8;&#x5EA6;&#x51CF;1&#xFF08;&#x5982;&#x679C;&#x4ECD;&#x7136;&#x843D;&#x5728;&#x5730;&#x56FE;&#x5185;&#x90E8;&#xFF0C;&#x5219;&#x5230;&#x8FBE;&#x7684;&#x77F3;&#x67F1;&#x9AD8;&#x5EA6;&#x4E0D;&#x53D8;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x77F3;&#x67F1;&#x539F;&#x6765;&#x9AD8;&#x5EA6;&#x4E3A;1&#xFF0C;&#x5219;&#x8725;&#x8734;&#x79BB;&#x5F00;&#x540E;&#x6D88;&#x5931;&#x3002;&#x4EE5;&#x540E;&#x5176;&#x4ED6;&#x8725;&#x8734;&#x4E0D;&#x80FD;&#x843D;&#x811A;&#x3002;&#x4EFB;&#x4F55;&#x65F6;&#x523B;&#x4E0D;&#x80FD;&#x6709;&#x4E24;&#x53EA;&#x8725;&#x8734;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x77F3;&#x67F1;&#x4E0A;&#x3002;</p>
<p>Input<br>&#x8F93;&#x5165;&#x7B2C;&#x4E00;&#x884C;&#x4E3A;&#x4E09;&#x4E2A;&#x6574;&#x6570;r&#xFF0C;c&#xFF0C;d&#xFF0C;&#x5373;&#x5730;&#x56FE;&#x7684;&#x89C4;&#x6A21;&#x4E0E;&#x6700;&#x5927;&#x8DF3;&#x8DC3;&#x8DDD;&#x79BB;&#x3002;&#x4EE5;&#x4E0B;r&#x884C;&#x4E3A;&#x77F3;&#x7AF9;&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;&#xFF0C;0&#x8868;&#x793A;&#x6CA1;&#x6709;&#x77F3;&#x67F1;&#xFF0C;1~3&#x8868;&#x793A;&#x77F3;&#x67F1;&#x7684;&#x521D;&#x59CB;&#x9AD8;&#x5EA6;&#x3002;&#x4EE5;&#x4E0B;r&#x884C;&#x4E3A;&#x8725;&#x8734;&#x4F4D;&#x7F6E;&#xFF0C;&#x201C;L&#x201D;&#x8868;&#x793A;&#x8725;&#x8734;&#xFF0C;&#x201C;.&#x201D;&#x8868;&#x793A;&#x6CA1;&#x6709;&#x8725;&#x8734;&#x3002;<br>Output<br>&#x8F93;&#x51FA;&#x4EC5;&#x4E00;&#x884C;&#xFF0C;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x5373;&#x65E0;&#x6CD5;&#x9003;&#x79BB;&#x7684;&#x8725;&#x8734;&#x603B;&#x6570;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x3002;</p>
<p>Sample Input<br>5 8 2<br>00000000<br>02000000<br>00321100<br>02000000<br>00000000<br>&#x2026;&#x2026;..<br>&#x2026;&#x2026;..<br>..LLLL..<br>&#x2026;&#x2026;..<br>&#x2026;&#x2026;..<br>Sample Output<br>1</p>
<p>HINT<br>100%&#x7684;&#x6570;&#x636E;&#x6EE1;&#x8DB3;&#xFF1A;1&lt;=r, c&lt;=20, 1&lt;=d&lt;=4</p>
</blockquote>
<p>&#x6807;&#x7B7E;&#xFF1A;&#x7F51;&#x7EDC;&#x6D41;</p>
<p>&#x7B80;&#x5355;&#x7684;&#x62C6;&#x70B9;&#x5EFA;&#x6A21;&#x9898;&#x3002;<br>&#x4ECE;&#x6E90;&#x70B9;&#x5411;&#x6BCF;&#x4E2A;&#x6709;&#x8725;&#x8734;&#x7684;&#x70B9;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;1&#x7684;&#x8FB9;&#xFF0C;&#x4ECE;&#x6BCF;&#x4E2A;&#x80FD;&#x8DF3;&#x51FA;&#x53BB;&#x7684;&#x70B9;&#x5411;&#x6C47;&#x70B9;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;INF&#x7684;&#x8FB9;&#x3002;&#x5BF9;&#x4E8E;&#x77F3;&#x7B0B;&#x9AD8;&#x5EA6;&#xFF0C;&#x628A;&#x6BCF;&#x4E2A;&#x70B9;&#x62C6;&#x6210;&#x4E24;&#x4E2A;&#x70B9;&#xFF0C;&#x5B83;&#x4EEC;&#x95F4;&#x7684;&#x8FB9;&#x5BB9;&#x91CF;&#x4E3A;&#x77F3;&#x7B0B;&#x9AD8;&#x5EA6;&#xFF0C;&#x82E5;&#x4F4D;&#x7F6E;(i, j)&#x53EF;&#x8DF3;&#x5230;(p, q)&#xFF0C;&#x5219;&#x4ECE;(i, j)&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x70B9;&#x5411;(p, q)&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x70B9;&#x8FDE;&#x5BB9;&#x91CF;&#x4E3A;INF&#x7684;&#x8FB9;&#x3002;&#x6700;&#x540E;&#x8DD1;&#x6700;&#x5927;&#x6D41;&#x5373;&#x53EF;&#x3002;<br>&#x70B9;&#x6570;&#x5C11;&#xFF0C;&#x90FD;&#x61D2;&#x5F97;&#x7528;&#x8FB9;&#x8868;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x7528;&#x90BB;&#x63A5;&#x77E9;&#x9635;&#x2026;&#x2026;</p>
<p>&#x9644;&#x4E0A;AC&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 20</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 2147483647</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, m, r, s, t, cnt, tot, id[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>], <span class="built_in">map</span>[MAX_N*MAX_N*<span class="number">2</span>+<span class="number">5</span>][MAX_N*MAX_N*<span class="number">2</span>+<span class="number">5</span>];</div><div class="line"><span class="keyword">char</span> a[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>], b[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</div><div class="line">			<span class="keyword">if</span> ((i != x || j != y) &amp;&amp; (a[i][j] != <span class="string">&apos;0&apos;</span>) &amp;&amp; r*r &gt;= (x-i)*(x-i)+(y-j)*(y-j))</div><div class="line">				<span class="built_in">map</span>[id[x][y]+<span class="number">1</span>][id[i][j]] = INF;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> d[MAX_N*MAX_N*<span class="number">2</span>+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; que;</div><div class="line">	<span class="built_in">memset</span>(d, <span class="number">-1</span>, <span class="keyword">sizeof</span>(d));</div><div class="line">	d[s] = <span class="number">0</span>, que.push(s);</div><div class="line">	<span class="keyword">while</span> (!que.empty()) {</div><div class="line">		<span class="keyword">int</span> u = que.front();	que.pop();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">0</span>; v &lt;= cnt; v++) {</div><div class="line">			<span class="keyword">if</span> (d[v] != <span class="number">-1</span> || !<span class="built_in">map</span>[u][v])	<span class="keyword">continue</span>;</div><div class="line">			d[v] = d[u]+<span class="number">1</span>, que.push(v);</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span> </span>{</div><div class="line">	<span class="keyword">if</span> (u == t)	<span class="keyword">return</span> flow;	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">0</span>; v &lt;= cnt; v++) {</div><div class="line">		<span class="keyword">if</span> (d[v] != d[u]+<span class="number">1</span> || !<span class="built_in">map</span>[u][v])	<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">int</span> tmp = DFS(v, min(flow, <span class="built_in">map</span>[u][v]));</div><div class="line">		<span class="built_in">map</span>[u][v] -= tmp, <span class="built_in">map</span>[v][u] += tmp, flow -= tmp, ret += tmp;</div><div class="line">		<span class="keyword">if</span> (!flow)	<span class="keyword">break</span>;</div><div class="line">	}</div><div class="line">	<span class="keyword">if</span> (!ret)	d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Dinic</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (BFS())	ret += DFS(s, INF);</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;r);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, a[i]+<span class="number">1</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) {</div><div class="line">			<span class="keyword">if</span> (a[i][j] == <span class="string">&apos;0&apos;</span>)	<span class="keyword">continue</span>;</div><div class="line">			id[i][j] = cnt+<span class="number">1</span>, <span class="built_in">map</span>[cnt+<span class="number">1</span>][cnt+<span class="number">2</span>] = a[i][j]-<span class="string">&apos;0&apos;</span>, cnt += <span class="number">2</span>;</div><div class="line">		}</div><div class="line">	}</div><div class="line">	s = <span class="number">0</span>, t = ++cnt;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, b[i]+<span class="number">1</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) {</div><div class="line">			<span class="keyword">if</span> (b[i][j] == <span class="string">&apos;L&apos;</span>)	tot++, <span class="built_in">map</span>[s][id[i][j]] = <span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span> (i-r &lt; <span class="number">1</span> || i+r &gt; n || j-r &lt; <span class="number">1</span> || j+r &gt; m)	<span class="built_in">map</span>[id[i][j]+<span class="number">1</span>][t] = INF;</div><div class="line">			<span class="keyword">if</span> (a[i][j] != <span class="string">&apos;0&apos;</span>)	build(i, j);</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, tot-Dinic());</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BZOJ/">BZOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/图论/">图论</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/省选/">省选</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络流/">网络流</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-LG1073【NOIp2009】最优贸易 Tarjan+DP" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/LG1073【NOIp2009】最优贸易 Tarjan+DP/" class="article-date">
  	<time datetime="2017-08-19T16:00:00.000Z" itemprop="datePublished">2017-08-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/LG1073【NOIp2009】最优贸易 Tarjan+DP/">
        LG1073【NOIp2009】最优贸易 &lt;Tarjan+DP&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>&#x6700;&#x4F18;&#x8D38;&#x6613;</p>
<p>C &#x56FD;&#x6709; n &#x4E2A;&#x5927;&#x57CE;&#x5E02;&#x548C; m &#x6761;&#x9053;&#x8DEF;&#xFF0C;&#x6BCF;&#x6761;&#x9053;&#x8DEF;&#x8FDE;&#x63A5;&#x8FD9; n &#x4E2A;&#x57CE;&#x5E02;&#x4E2D;&#x7684;&#x67D0;&#x4E24;&#x4E2A;&#x57CE;&#x5E02;&#x3002;&#x4EFB;&#x610F;&#x4E24;&#x4E2A;&#x57CE;&#x5E02;&#x4E4B;&#x95F4;&#x6700;&#x591A;&#x53EA;&#x6709;&#x4E00;&#x6761;&#x9053;&#x8DEF;&#x76F4;&#x63A5;&#x76F8;&#x8FDE;&#x3002;&#x8FD9; m &#x6761;&#x9053;&#x8DEF;&#x4E2D;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x4E3A;&#x5355;&#x5411;&#x901A;&#x884C;&#x7684;&#x9053;&#x8DEF;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x4E3A;&#x53CC;&#x5411;&#x901A;&#x884C;&#x7684;&#x9053;&#x8DEF;&#xFF0C;&#x53CC;&#x5411;&#x901A;&#x884C;&#x7684;&#x9053;&#x8DEF;&#x5728;&#x7EDF;&#x8BA1;&#x6761;&#x6570;&#x65F6;&#x4E5F;&#x8BA1;&#x4E3A; 1 &#x6761;&#x3002;C &#x56FD;&#x5E45;&#x5458;&#x8FBD;&#x9614;&#xFF0C;&#x5404;&#x5730;&#x7684;&#x8D44;&#x6E90;&#x5206;&#x5E03;&#x60C5;&#x51B5;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x8FD9;&#x5C31;&#x5BFC;&#x81F4;&#x4E86;&#x540C;&#x4E00;&#x79CD;&#x5546;&#x54C1;&#x5728;&#x4E0D;&#x540C;&#x57CE;&#x5E02;&#x7684;&#x4EF7;&#x683C;&#x4E0D;&#x4E00;&#x5B9A;&#x76F8;&#x540C;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x540C;&#x4E00;&#x79CD;&#x5546;&#x54C1;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x57CE;&#x5E02;&#x7684;&#x4E70;&#x5165;&#x4EF7;&#x548C;&#x5356;&#x51FA;&#x4EF7;&#x59CB;&#x7EC8;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;<br>&#x5546;&#x4EBA;&#x963F;&#x9F99;&#x6765;&#x5230; C &#x56FD;&#x65C5;&#x6E38;&#x3002;&#x5F53;&#x4ED6;&#x5F97;&#x77E5;&#x540C;&#x4E00;&#x79CD;&#x5546;&#x54C1;&#x5728;&#x4E0D;&#x540C;&#x57CE;&#x5E02;&#x7684;&#x4EF7;&#x683C;&#x53EF;&#x80FD;&#x4F1A;&#x4E0D;&#x540C;&#x8FD9;&#x4E00;&#x4FE1;&#x606F;&#x4E4B;&#x540E;&#xFF0C;&#x4FBF;&#x51B3;&#x5B9A;&#x5728;&#x65C5;&#x6E38;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5229;&#x7528;&#x5546;&#x54C1;&#x5728;&#x4E0D;&#x540C;&#x57CE;&#x5E02;&#x4E2D;&#x7684;&#x5DEE;&#x4EF7;&#x8D5A;&#x56DE;&#x4E00;&#x70B9;&#x65C5;&#x8D39;&#x3002;&#x8BBE; C &#x56FD; n &#x4E2A;&#x57CE;&#x5E02;&#x7684;&#x6807;&#x53F7;&#x4ECE; 1~ n&#xFF0C;&#x963F;&#x9F99;&#x51B3;&#x5B9A;&#x4ECE; 1 &#x53F7;&#x57CE;&#x5E02;&#x51FA;&#x53D1;&#xFF0C;&#x5E76;&#x6700;&#x7EC8;&#x5728; n &#x53F7;&#x57CE;&#x5E02;&#x7ED3;&#x675F;&#x81EA;&#x5DF1;&#x7684;&#x65C5;&#x884C;&#x3002;&#x5728;&#x65C5;&#x6E38;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4EFB;&#x4F55;&#x57CE;&#x5E02;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x7ECF;&#x8FC7;&#x591A;&#x6B21;&#xFF0C;&#x4F46;&#x4E0D;&#x8981;&#x6C42;&#x7ECF;&#x8FC7;&#x6240;&#x6709; n &#x4E2A;&#x57CE;&#x5E02;&#x3002;&#x963F;&#x9F99;&#x901A;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x8D38;&#x6613;&#x65B9;&#x5F0F;&#x8D5A;&#x53D6;&#x65C5;&#x8D39;&#xFF1A;&#x4ED6;&#x4F1A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x7ECF;&#x8FC7;&#x7684;&#x57CE;&#x5E02;&#x4E70;&#x5165;&#x4ED6;&#x6700;&#x559C;&#x6B22;&#x7684;&#x5546;&#x54C1;&#x2015;&#x2015;&#x6C34;&#x6676;&#x7403;&#xFF0C;&#x5E76;&#x5728;&#x4E4B;&#x540E;&#x7ECF;&#x8FC7;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x57CE;&#x5E02;&#x5356;&#x51FA;&#x8FD9;&#x4E2A;&#x6C34;&#x6676;&#x7403;&#xFF0C;&#x7528;&#x8D5A;&#x53D6;&#x7684;&#x5DEE;&#x4EF7;&#x5F53;&#x505A;&#x65C5;&#x8D39;&#x3002;&#x7531;&#x4E8E;&#x963F;&#x9F99;&#x4E3B;&#x8981;&#x662F;&#x6765; C &#x56FD;&#x65C5;&#x6E38;&#xFF0C;&#x4ED6;&#x51B3;&#x5B9A;&#x8FD9;&#x4E2A;&#x8D38;&#x6613;&#x53EA;&#x8FDB;&#x884C;&#x6700;&#x591A;&#x4E00;&#x6B21;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x5728;&#x8D5A;&#x4E0D;&#x5230;&#x5DEE;&#x4EF7;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4ED6;&#x5C31;&#x65E0;&#x9700;&#x8FDB;&#x884C;&#x8D38;&#x6613;&#x3002;<br>&#x73B0;&#x5728;&#x7ED9;&#x51FA; n &#x4E2A;&#x57CE;&#x5E02;&#x7684;&#x6C34;&#x6676;&#x7403;&#x4EF7;&#x683C;&#xFF0C;m &#x6761;&#x9053;&#x8DEF;&#x7684;&#x4FE1;&#x606F;&#xFF08;&#x6BCF;&#x6761;&#x9053;&#x8DEF;&#x6240;&#x8FDE;&#x63A5;&#x7684;&#x4E24;&#x4E2A;&#x57CE;&#x5E02;&#x7684;&#x7F16;&#x53F7;&#x4EE5;&#x53CA;&#x8BE5;&#x6761;&#x9053;&#x8DEF;&#x7684;&#x901A;&#x884C;&#x60C5;&#x51B5;&#xFF09;&#x3002;&#x8BF7;&#x4F60;&#x544A;&#x8BC9;&#x963F;&#x9F99;&#xFF0C;&#x4ED6;&#x6700;&#x591A;&#x80FD;&#x8D5A;&#x53D6;&#x591A;&#x5C11;&#x65C5;&#x8D39;&#x3002;</p>
<p>&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x683C;&#x5F0F;<br>&#x8F93;&#x5165;&#x683C;&#x5F0F;&#xFF1A;<br>&#x7B2C;&#x4E00;&#x884C;&#x5305;&#x542B; 2 &#x4E2A;&#x6B63;&#x6574;&#x6570; n &#x548C; m&#xFF0C;&#x4E2D;&#x95F4;&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#xFF0C;&#x5206;&#x522B;&#x8868;&#x793A;&#x57CE;&#x5E02;&#x7684;&#x6570;&#x76EE;&#x548C;&#x9053;&#x8DEF;&#x7684;<br>&#x6570;&#x76EE;&#x3002;<br>&#x7B2C;&#x4E8C;&#x884C; n &#x4E2A;&#x6B63;&#x6574;&#x6570;&#xFF0C;&#x6BCF;&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x4E4B;&#x95F4;&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#xFF0C;&#x6309;&#x6807;&#x53F7;&#x987A;&#x5E8F;&#x5206;&#x522B;&#x8868;&#x793A;&#x8FD9; n &#x4E2A;&#x57CE;<br>&#x5E02;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x3002;<br>&#x63A5;&#x4E0B;&#x6765; m &#x884C;&#xFF0C;&#x6BCF;&#x884C;&#x6709; 3 &#x4E2A;&#x6B63;&#x6574;&#x6570;&#xFF0C;x&#xFF0C;y&#xFF0C;z&#xFF0C;&#x6BCF;&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x4E4B;&#x95F4;&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#x3002;&#x5982;&#x679C; z=1&#xFF0C;<br>&#x8868;&#x793A;&#x8FD9;&#x6761;&#x9053;&#x8DEF;&#x662F;&#x57CE;&#x5E02; x &#x5230;&#x57CE;&#x5E02; y &#x4E4B;&#x95F4;&#x7684;&#x5355;&#x5411;&#x9053;&#x8DEF;&#xFF1B;&#x5982;&#x679C; z=2&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x6761;&#x9053;&#x8DEF;&#x4E3A;&#x57CE;&#x5E02; x &#x548C;&#x57CE;&#x5E02;<br>y &#x4E4B;&#x95F4;&#x7684;&#x53CC;&#x5411;&#x9053;&#x8DEF;&#x3002;<br>&#x8F93;&#x51FA;&#x683C;&#x5F0F;&#xFF1A;<br>&#x8F93;&#x51FA;&#x6587;&#x4EF6; trade.out &#x5171; 1 &#x884C;&#xFF0C;&#x5305;&#x542B; 1 &#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x6700;&#x591A;&#x80FD;&#x8D5A;&#x53D6;&#x7684;&#x65C5;&#x8D39;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x8D38;&#x6613;&#xFF0C;<br>&#x5219;&#x8F93;&#x51FA; 0&#x3002;</p>
<p>&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6837;&#x4F8B;<br>&#x8F93;&#x5165;&#x6837;&#x4F8B;#1&#xFF1A;<br>5 5<br>4 3 5 6 1<br>1 2 1<br>1 4 1<br>2 3 2<br>3 5 1<br>4 5 2<br>&#x8F93;&#x51FA;&#x6837;&#x4F8B;#1&#xFF1A;<br>5</p>
<p>&#x8BF4;&#x660E;<br>&#x3010;&#x6570;&#x636E;&#x8303;&#x56F4;&#x3011;<br>&#x8F93;&#x5165;&#x6570;&#x636E;&#x4FDD;&#x8BC1; 1 &#x53F7;&#x57CE;&#x5E02;&#x53EF;&#x4EE5;&#x5230;&#x8FBE; n &#x53F7;&#x57CE;&#x5E02;&#x3002;<br>&#x5BF9;&#x4E8E; 10%&#x7684;&#x6570;&#x636E;&#xFF0C;1&#x2264;n&#x2264;6&#x3002;<br>&#x5BF9;&#x4E8E; 30%&#x7684;&#x6570;&#x636E;&#xFF0C;1&#x2264;n&#x2264;100&#x3002;<br>&#x5BF9;&#x4E8E; 50%&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x4E00;&#x6761;&#x65C5;&#x6E38;&#x8DEF;&#x7EBF;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x4E00;&#x4E2A;&#x57CE;&#x5E02;&#x51FA;&#x53D1;&#xFF0C;&#x518D;&#x56DE;&#x5230;&#x8FD9;&#x4E2A;&#x57CE;&#x5E02;&#x3002;<br>&#x5BF9;&#x4E8E; 100%&#x7684;&#x6570;&#x636E;&#xFF0C;1&#x2264;n&#x2264;100000&#xFF0C;1&#x2264;m&#x2264;500000&#xFF0C;1&#x2264;x&#xFF0C;y&#x2264;n&#xFF0C;1&#x2264;z&#x2264;2&#xFF0C;1&#x2264;&#x5404;&#x57CE;&#x5E02;<br>&#x6C34;&#x6676;&#x7403;&#x4EF7;&#x683C;&#x2264;100&#x3002;<br>NOIP 2009 &#x63D0;&#x9AD8;&#x7EC4; &#x7B2C;&#x4E09;&#x9898;</p>
</blockquote>
<p>&#x6807;&#x7B7E;&#xFF1A;Tarjan DP</p>
<p>&#x5410;&#x69FD;&#x4E00;&#x4E0B;&#xFF0C;&#x8FD9;&#x4EBA;&#x7684;&#x65C5;&#x8D39;&#x8FDC;&#x5927;&#x4E8E;&#x4ED6;&#x8D5A;&#x7684;&#x5DEE;&#x4EF7;<br>&#x4F5C;&#x4E3A;&#x4E2D;&#x95F4;&#x5546;&#xFF0C;&#x771F;&#x662F;&#x4E2A;&#x65E0;&#x8111;&#x5546;&#x4EBA;&#x2026;</p>
<p>&#x9996;&#x5148;&#x80AF;&#x5B9A;&#x8981;&#x7F29;&#x70B9;&#xFF0C;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x5206;&#x91CF;&#x7684;&#x6240;&#x6709;&#x70B9;&#x4E2D;&#x4EF7;&#x683C;&#x7684;&#x6700;&#x5927;&#x503C;&#x548C;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x7F29;&#x70B9;&#x540E;DP&#x7684;&#x65F6;&#x5019;&#x5C31;&#x662F;DAG&#x4E86;&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;&#x73AF;&#x3002;<br>&#x63A5;&#x4E0B;&#x6765;&#x662F;BFS&#x540C;&#x65F6;DP&#x3002;f[i]&#x8868;&#x793A;&#x4ECE;&#x6E90;&#x70B9;&#x8D70;&#x5230;i&#x70B9;&#xFF0C;&#x6700;&#x5927;&#x5DEE;&#x4EF7;&#x662F;&#x591A;&#x5C11;&#x3002;&#x521D;&#x503C;&#x4E3A;f[i] = max[i]-min[i]&#x3002;&#x4ECE;&#x6E90;&#x70B9;&#x6240;&#x5728;&#x70B9;&#x5F00;&#x59CB;BFS&#xFF0C;&#x4ECE;u&#x8D70;&#x5230;&#x4E00;&#x4E2A;&#x70B9;v&#xFF0C;&#x5148;&#x66F4;&#x65B0;min[v]&#x7684;&#x503C;&#xFF0C;&#x5373;min[v] = min(min[u], min[v])&#x3002;&#x7136;&#x540E;&#x66F4;&#x65B0;f[v] = max(max(f[u], f[v]), max[v]-min[v])&#xFF0C;&#x5206;&#x522B;&#x6307;&#x6700;&#x5927;&#x4EF7;&#x683C;&#x5728;&#x4ECE;&#x6E90;&#x70B9;&#x5230;u&#x7684;&#x8DEF;&#x5F84;&#x4E0A;&#x548C;&#x6700;&#x5927;&#x4EF7;&#x683C;&#x5728;v&#x8FD9;&#x4E2A;&#x5206;&#x91CF;&#x91CC;&#x3002;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x7EC8;&#x70B9;&#x6240;&#x5728;&#x5206;&#x91CF;&#x7684;f&#x503C;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x9644;&#x4E0A;AC&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 100000</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 2147483647</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, m, c[MAX_N+<span class="number">5</span>], mm[MAX_N+<span class="number">5</span>], mx[MAX_N+<span class="number">5</span>], f[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="keyword">int</span> dfn[MAX_N+<span class="number">5</span>], low[MAX_N+<span class="number">5</span>], id[MAX_N+<span class="number">5</span>], ind, cnt;</div><div class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; G[MAX_N+<span class="number">5</span>], E[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="built_in">stack</span> &lt;<span class="keyword">int</span>&gt; sta;	<span class="keyword">bool</span> insta[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> u)</span> </span>{</div><div class="line">	dfn[u] = low[u] = ++ind, sta.push(u), insta[u] = <span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].size(); i++) {</div><div class="line">		<span class="keyword">int</span> v = G[u][i];</div><div class="line">		<span class="keyword">if</span> (!dfn[v])	tarjan(v), low[u] = min(low[u], low[v]);</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (insta[v])	low[u] = min(low[u], dfn[v]);</div><div class="line">	}</div><div class="line">	<span class="keyword">if</span> (low[u] == dfn[u]) {</div><div class="line">		cnt++, mm[cnt] = INF, mx[cnt] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = sta.top(); ; i = sta.top()) {</div><div class="line">			id[i] = cnt, mm[cnt] = min(mm[cnt], c[i]), mx[cnt] = max(mx[cnt], c[i]);</div><div class="line">			sta.pop(), insta[i] = <span class="literal">false</span>;	<span class="keyword">if</span> (i == u)	<span class="keyword">break</span>;</div><div class="line">		}</div><div class="line">	}</div><div class="line">}</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; que;	<span class="keyword">bool</span> inque[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)	f[i] = mx[i]-mm[i];</div><div class="line">	que.push(id[<span class="number">1</span>]), inque[id[<span class="number">1</span>]] = <span class="literal">true</span>;</div><div class="line">	<span class="keyword">while</span> (!que.empty()) {</div><div class="line">		<span class="keyword">int</span> u = que.front();	que.pop(), inque[u] = <span class="literal">false</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; E[u].size(); i++) {</div><div class="line">			<span class="keyword">int</span> v = E[u][i];	mm[v] = min(mm[v], mm[u]);</div><div class="line">			f[v] = max(max(f[u], f[v]), mx[v]-mm[v]);</div><div class="line">			<span class="keyword">if</span> (!inque[v])	que.push(v), inque[v] = <span class="literal">true</span>;</div><div class="line">		}</div><div class="line">	}</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]);</div><div class="line">	<span class="keyword">while</span> (m--) {</div><div class="line">		<span class="keyword">int</span> u, v, d;	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;u, &amp;v, &amp;d);</div><div class="line">		<span class="keyword">if</span> (d == <span class="number">1</span>)	G[u].push_back(v);</div><div class="line">		<span class="keyword">else</span>	G[u].push_back(v), G[v].push_back(u);</div><div class="line">	}</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)	<span class="keyword">if</span> (!dfn[i])	tarjan(i);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">1</span>; u &lt;= n; u++)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].size(); i++) {</div><div class="line">			<span class="keyword">int</span> v = G[u][i];	<span class="keyword">if</span> (id[u] == id[v])	<span class="keyword">continue</span>;</div><div class="line">			E[id[u]].push_back(id[v]);</div><div class="line">		}</div><div class="line">	BFS();	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[id[n]]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DP/">DP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LG/">LG</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NOIp/">NOIp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tarjan/">Tarjan</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/图论/">图论</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-HDU4348 To The Moon 带修主席树" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/HDU4348 To The Moon 带修主席树/" class="article-date">
  	<time datetime="2017-08-19T16:00:00.000Z" itemprop="datePublished">2017-08-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/HDU4348 To The Moon 带修主席树/">
        HDU4348 To The Moon &lt;带修主席树&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>&#x3010;HDU4348&#x3011;To The Moon</p>
<p>Time Limit: 4000/2000 MS (Java/Others)<br>Memory Limit: 65536/65536 K (Java/Others)</p>
<p>Problem Description<br>To The Moon is a independent game released in November 2011, it is a role-playing adventure game powered by RPG Maker.<br>The premise of To The Moon is based around a technology that allows us to permanently reconstruct the memory on dying man. In this problem, we&#x2019;ll give you a chance, to implement the logic behind the scene.<br>You&#x2018;ve been given N integers A[1], A[2],&#x2026;, A[N]. On these integers, you need to implement the following operations:</p>
<ol>
<li>C l r d: Adding a constant d for every {Ai | l &lt;= i &lt;= r}, and increase the time stamp by 1, this is the only operation that will cause the time stamp increase. </li>
<li>Q l r: Querying the current sum of {Ai | l &lt;= i &lt;= r}.</li>
<li>H l r t: Querying a history sum of {Ai | l &lt;= i &lt;= r} in time t.</li>
<li>B t: Back to time t. And once you decide return to a past, you can never be access to a forward edition anymore.<br>.. N, M &#x2264; 105, |A[i]| &#x2264; 109, 1 &#x2264; l &#x2264; r &#x2264; N, |d| &#x2264; 104 .. the system start from time 0, and the first modification is in time 1, t &#x2265; 0, and won&#x2019;t introduce you to a future state.</li>
</ol>
<p>Input<br>n m<br>A1 A2 &#x2026; An<br>&#x2026; (here following the m operations. )<br>Output<br>&#x2026; (for each query, simply print the result. )</p>
<p>Sample Input<br>10 5<br>1 2 3 4 5 6 7 8 9 10<br>Q 4 4<br>Q 1 10<br>Q 2 4<br>C 3 6 3<br>Q 2 4<br>2 4<br>0 0<br>C 1 1 1<br>C 2 2 -1<br>Q 1 2<br>H 1 2 1<br>Sample Output<br>4<br>55<br>9<br>15<br>0<br>1</p>
</blockquote>
<p>&#x6807;&#x7B7E;&#xFF1A;&#x5E26;&#x4FEE;&#x4E3B;&#x5E2D;&#x6811;</p>
<p>&#x9898;&#x76EE;&#x5927;&#x610F;&#xFF1A;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4F7F;&#x5F97;&#x5176;&#x53EF;&#x6709;&#x56DB;&#x79CD;&#x64CD;&#x4F5C;&#xFF1A;&#x533A;&#x95F4;&#x4FEE;&#x6539;&#xFF0C;&#x533A;&#x95F4;&#x6C42;&#x548C;&#xFF0C;&#x67D0;&#x65F6;&#x95F4;&#x7684;&#x533A;&#x95F4;&#x548C;&#xFF0C;&#x8FD4;&#x56DE;&#x67D0;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x5F88;&#x660E;&#x663E;&#x8FD9;&#x662F;&#x4E00;&#x9053;&#x4E3B;&#x5E2D;&#x6811;&#x7684;&#x677F;&#x5B50;&#x9898;&#x3002;&#x4E0D;&#x8FC7;&#x6B64;&#x9898;&#x8981;&#x5E26;&#x533A;&#x95F4;&#x4FEE;&#x6539;&#x3002;<br>&#x666E;&#x901A;&#x533A;&#x95F4;&#x4FEE;&#x6539;&#x9700;&#x8981;&#x52A0;tag&#xFF0C;&#x5E76;&#x4E0D;&#x65AD;&#x4E0B;&#x4F20;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x4E3B;&#x5E2D;&#x6811;&#xFF0C;&#x4E0B;&#x4F20;&#x610F;&#x5473;&#x7740;&#x65B0;&#x5EFA;&#x8282;&#x70B9;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;MLE&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x66B4;&#x529B;&#x4E00;&#x70B9;&#xFF0C;&#x76F4;&#x63A5;&#x6807;&#x8BB0;&#x6C38;&#x4E45;&#x5316;&#xFF0C;&#x8FD9;&#x6837;&#x5199;&#x8D77;&#x6765;&#x7B80;&#x6D01;&#xFF0C;&#x800C;&#x4E14;&#x7701;&#x7A7A;&#x95F4;&#x3002;</p>
<p>&#x76F4;&#x63A5;&#x4E0A;&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 100000</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span><span class="keyword">int</span> ls, rs; <span class="keyword">long</span> <span class="keyword">long</span> val, tag;} tr[MAX_N*<span class="number">50</span>+<span class="number">5</span>];</div><div class="line"><span class="keyword">int</span> n, m;</div><div class="line"><span class="keyword">int</span> cnt, now, root[MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">updata</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>{tr[v].val = tr[tr[v].ls].val+tr[tr[v].rs].val+(<span class="keyword">long</span> <span class="keyword">long</span>)(t-s+<span class="number">1</span>)*tr[v].tag;}</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>{</div><div class="line">	tr[v].ls = tr[v].rs = tr[v].tag = tr[v].val = <span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span> (s == t) {</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%I64d&quot;</span>, &amp;tr[v].val);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	}</div><div class="line">	tr[v].ls = ++cnt, tr[v].rs = ++cnt;</div><div class="line">	<span class="keyword">int</span> mid = s+t&gt;&gt;<span class="number">1</span>;</div><div class="line">	build(tr[v].ls, s, mid);</div><div class="line">	build(tr[v].rs, mid+<span class="number">1</span>, t);</div><div class="line">	updata(v, s, t);</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> o, <span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">long</span> <span class="keyword">long</span> x)</span> </span>{</div><div class="line">	tr[v] = tr[o];</div><div class="line">	<span class="keyword">if</span> (s &gt;= l &amp;&amp; t &lt;= r) {</div><div class="line">		tr[v].tag += x;</div><div class="line">		tr[v].val += (<span class="keyword">long</span> <span class="keyword">long</span>)(t-s+<span class="number">1</span>)*x;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	}</div><div class="line">	<span class="keyword">int</span> mid = s+t&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span> (l &lt;= mid)	modify(tr[v].ls = ++cnt, tr[o].ls, s, mid, l, r, x);</div><div class="line">	<span class="keyword">if</span> (r &gt;= mid+<span class="number">1</span>)	modify(tr[v].rs = ++cnt, tr[o].rs, mid+<span class="number">1</span>, t, l, r, x);</div><div class="line">	updata(v, s, t);</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">long</span> <span class="keyword">long</span> tot)</span> </span>{</div><div class="line">	<span class="keyword">if</span> (s &gt;= l &amp;&amp; t &lt;= r)	<span class="keyword">return</span> tr[v].val+(<span class="keyword">long</span> <span class="keyword">long</span>)(t-s+<span class="number">1</span>)*tot;</div><div class="line">	tot += tr[v].tag;</div><div class="line">	<span class="keyword">int</span> mid = s+t&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span> (l &lt;= mid)	ret += query(tr[v].ls, s, mid, l, r, tot);</div><div class="line">	<span class="keyword">if</span> (r &gt;= mid+<span class="number">1</span>)	ret += query(tr[v].rs, mid+<span class="number">1</span>, t, l, r, tot);</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m) != EOF) {</div><div class="line">		cnt = now = <span class="number">0</span>;</div><div class="line">		root[now] = ++cnt;</div><div class="line">		build(root[now], <span class="number">1</span>, n);</div><div class="line">		<span class="keyword">while</span> (m--) {</div><div class="line">			<span class="keyword">char</span> ch;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; ch;</div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">&apos;C&apos;</span>) {</div><div class="line">				<span class="keyword">int</span> l, r;</div><div class="line">				<span class="keyword">long</span> <span class="keyword">long</span> d;</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%I64d&quot;</span>, &amp;l, &amp;r, &amp;d);</div><div class="line">				now++;</div><div class="line">				root[now] = ++cnt;</div><div class="line">				modify(root[now], root[now<span class="number">-1</span>], <span class="number">1</span>, n, l, r, d);</div><div class="line">			}</div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">&apos;Q&apos;</span>) {</div><div class="line">				<span class="keyword">int</span> l, r;</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;l, &amp;r);</div><div class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%I64d\n&quot;</span>, query(root[now], <span class="number">1</span>, n, l, r, <span class="number">0L</span>L));</div><div class="line">			}</div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">&apos;H&apos;</span>) {</div><div class="line">				<span class="keyword">int</span> l, r, t;</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;l, &amp;r, &amp;t);</div><div class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%I64d\n&quot;</span>, query(root[t], <span class="number">1</span>, n, l, r, <span class="number">0L</span>L));</div><div class="line">			}</div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">&apos;B&apos;</span>) {</div><div class="line">				<span class="keyword">int</span> t;</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</div><div class="line">				now = t;</div><div class="line">			}</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HDU/">HDU</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/主席树/">主席树</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据结构/">数据结构</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-POJ1170 Shopping Offers 五维DP" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/POJ1170 Shopping Offers 五维DP/" class="article-date">
  	<time datetime="2017-08-16T16:00:00.000Z" itemprop="datePublished">2017-08-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/POJ1170 Shopping Offers 五维DP/">
        POJ1170 Shopping Offers &lt;五维DP&gt;
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Shopping Offers</p>
<p>In a shop each kind of product has a price. For example, the price of a flower is 2 ICU (Informatics Currency Units) and the price of a vase is 5 ICU. In order to attract more customers, the shop introduces some special offers.<br>A special offer consists of one or more product items for a reduced price. Examples: three flowers for 5 ICU instead of 6, or two vases together with one flower for 10 ICU instead of 12.<br>Write a program that calculates the price a customer has to pay for certain items, making optimal use of the special offers. That is, the price should be as low as possible. You are not allowed to add items, even if that would lower the price.<br>For the prices and offers given above, the (lowest) price for three flowers and two vases is 14 ICU: two vases and one flower for the reduced price of 10 ICU and two flowers for the regular price of 4 ICU. </p>
<p>Input<br>Your program is to read from standard input. The first line contains the number b of different kinds of products in the basket (0 &lt;= b &lt;= 5). Each of the next b lines contains three values c, k, and p. The value c is the (unique) product code (1 &lt;= c &lt;= 999). The value k indicates how many items of this product are in the basket (1 &lt;= k &lt;= 5). The value p is the regular price per item (1 &lt;= p &lt;= 999). Notice that all together at most 5*5=25 items can be in the basket. The b+2nd line contains the number s of special offers (0 &lt;= s &lt;= 99). Each of the next s lines describes one offer by giving its structure and its reduced price. The first number n on such a line is the number of different kinds of products that are part of the offer (1 &lt;= n &lt;= 5). The next n pairs of numbers (c,k) indicate that k items (1 &lt;= k &lt;= 5) with product code c (1 &lt;= c &lt;= 999) are involved in the offer. The last number p on the line stands for the reduced price (1 &lt;= p &lt;= 9999). The reduced price of an offer is less than the sum of the regular prices.<br>Output<br>Your program is to write to standard output. Output one line with the lowest possible price to be paid. </p>
<p>Sample Input<br>2<br>7 3 2<br>8 2 5<br>2<br>1 7 3 5<br>2 7 1 8 2 10<br>Sample Output<br>14</p>
</blockquote>
<p>&#x6807;&#x7B7E;&#xFF1A;&#x4E94;&#x7EF4;DP</p>
<p>&#x9898;&#x76EE;&#x5927;&#x610F;&#xFF1A;&#x6709;&#x81F3;&#x591A;&#x4E94;&#x79CD;&#x7269;&#x54C1;&#xFF0C;&#x7ED9;&#x51FA;&#x6BCF;&#x4E00;&#x79CD;&#x7269;&#x54C1;&#x7684;&#x5355;&#x4EF7;&#x548C;&#x51E0;&#x79CD;&#x5957;&#x9910;&#x7684;&#x4EF7;&#x683C;&#xFF0C;&#x6C42;&#x4E70;&#x76EE;&#x6807;&#x7269;&#x54C1;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x591A;&#x5C11;&#x94B1;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x4E00;&#x9053;&#x5927;&#x6C34;&#x9898;&#x3002;&#x56E0;&#x4E3A;&#x53EA;&#x6709;&#x4E94;&#x79CD;&#x7269;&#x54C1;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E94;&#x7EF4;&#x7684;dp&#x6765;&#x8868;&#x793A;&#xFF0C;&#x4E94;&#x4E2A;&#x7EF4;&#x5EA6;&#x5206;&#x522B;&#x8868;&#x793A;&#x4E94;&#x79CD;&#x7269;&#x54C1;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x5373;f[i][j][p][q][r]&#x8868;&#x793A;&#x7B2C;&#x4E00;&#x79CD;&#x7269;&#x54C1;&#x53D6;i&#x4E2A;&#xFF0C;&#x7B2C;&#x4E8C;&#x79CD;&#x7269;&#x54C1;&#x53D6;j&#x4E2A;&#x2026;&#x2026;&#x7B2C;&#x4E94;&#x79CD;&#x7269;&#x54C1;&#x53D6;r&#x4E2A;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x591A;&#x5C11;&#x94B1;&#x3002;&#x628A;&#x6BCF;&#x79CD;&#x7269;&#x54C1;&#x7684;&#x5355;&#x4EF7;&#x770B;&#x4F5C;&#x4E00;&#x79CD;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7269;&#x54C1;&#x7684;&#x5957;&#x9910;&#xFF0C;&#x8FD9;&#x6837;&#x679A;&#x4E3E;&#x5957;&#x9910;&#xFF0C;&#x770B;&#x80FD;&#x5426;&#x8F6C;&#x79FB;&#x3002;</p>
<p>AC&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 5</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_S 100</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_C 1000</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 2147483647</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, m, cnt, basket[MAX_N+<span class="number">5</span>], offer[MAX_S+<span class="number">10</span>][MAX_N+<span class="number">5</span>], v[MAX_S+<span class="number">10</span>], <span class="built_in">map</span>[MAX_C+<span class="number">5</span>];</div><div class="line"><span class="keyword">int</span> f[MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>][MAX_N+<span class="number">5</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {</div><div class="line">		<span class="keyword">int</span> id, num, p;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;id, &amp;num, &amp;p);</div><div class="line">		<span class="built_in">map</span>[id] = i, basket[i] = num, offer[cnt][i] = <span class="number">1</span>, v[cnt++] = p;</div><div class="line">	}</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; m; i++) {</div><div class="line">		<span class="keyword">int</span> num, id, k, p;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) {</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;id, &amp;k);</div><div class="line">			offer[cnt][<span class="built_in">map</span>[id]] = k;</div><div class="line">		}</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p);</div><div class="line">		v[cnt++] = p;</div><div class="line">	}</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a0 = <span class="number">0</span>; a0 &lt;= basket[<span class="number">0</span>]; a0++)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a1 = <span class="number">0</span>; a1 &lt;= basket[<span class="number">1</span>]; a1++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> a2 = <span class="number">0</span>; a2 &lt;= basket[<span class="number">2</span>]; a2++)</div><div class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> a3 = <span class="number">0</span>; a3 &lt;= basket[<span class="number">3</span>]; a3++)</div><div class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> a4 = <span class="number">0</span>; a4 &lt;= basket[<span class="number">4</span>]; a4++) {</div><div class="line">						<span class="keyword">if</span> (a0 == <span class="number">0</span> &amp;&amp; a1 == <span class="number">0</span> &amp;&amp; a2 == <span class="number">0</span> &amp;&amp; a3 == <span class="number">0</span> &amp;&amp; a4 == <span class="number">0</span>) {f[a0][a1][a2][a3][a4] = <span class="number">0</span>;	<span class="keyword">continue</span>;}</div><div class="line">						f[a0][a1][a2][a3][a4] = INF;</div><div class="line">						<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cnt; i++) {</div><div class="line">							<span class="keyword">if</span> (a0 &lt; offer[i][<span class="number">0</span>] || a1 &lt; offer[i][<span class="number">1</span>] || a2 &lt; offer[i][<span class="number">2</span>] || a3 &lt; offer[i][<span class="number">3</span>] || a4 &lt; offer[i][<span class="number">4</span>])	<span class="keyword">continue</span>;</div><div class="line">							f[a0][a1][a2][a3][a4] = min(f[a0][a1][a2][a3][a4], f[a0-offer[i][<span class="number">0</span>]][a1-offer[i][<span class="number">1</span>]][a2-offer[i][<span class="number">2</span>]][a3-offer[i][<span class="number">3</span>]][a4-offer[i][<span class="number">4</span>]]+v[i]);</div><div class="line">						}</div><div class="line">					}</div><div class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[basket[<span class="number">0</span>]][basket[<span class="number">1</span>]][basket[<span class="number">2</span>]][basket[<span class="number">3</span>]][basket[<span class="number">4</span>]]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DP/">DP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/POJ/">POJ</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/11/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/13/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 Azrael_Death
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
  <script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>
<!--
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->



<!--
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.js"></script>
-->

  </div>
</body>
</html>